/*! For license information please see 1.3cfebadd.chunk.js.LICENSE.txt */
(this["webpackJsonpspeech2code.webapp"]=this["webpackJsonpspeech2code.webapp"]||[]).push([[1],Array(18).concat([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},function(e,t,n){e.exports=n(125)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(54);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(38),i=n(69),o=n(95);function s(e){var t=Object(i.a)();return function(){var n,i=Object(r.a)(e);if(t){var s=Object(r.a)(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return Object(o.a)(this,n)}}},,function(e,t,n){"use strict";n.d(t,"OutputFormatPropertyName",(function(){return r})),n.d(t,"CancellationErrorCodePropertyName",(function(){return i})),n.d(t,"ServicePropertiesPropertyName",(function(){return o})),n.d(t,"ForceDictationPropertyName",(function(){return s}));var r="OutputFormat",i="CancellationErrorCode",o="ServiceProperties",s="ForceDictation"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(7);function i(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(r.a)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw s}}}}},,function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return v}));var r=n(18),i=n(22),o=n(23),s=n(38),a=n(54);var c=n(69);function u(e,t,n){return(u=Object(c.a)()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Object(a.a)(i,n.prototype),i}).apply(null,arguments)}function h(e){var t="function"===typeof Map?new Map:void 0;return(h=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return u(e,arguments,Object(s.a)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Object(a.a)(r,e)})(e)}var p=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).name="ArgumentNull",i.message=e,i}return n}(h(Error)),f=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).name="InvalidOperation",i.message=e,i}return n}(h(Error)),v=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e,i){var o;return Object(r.a)(this,n),(o=t.call(this,i)).name=e+"ObjectDisposed",o.message=i,o}return n}(h(Error))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(53);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t,n){"use strict";function r(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var s=e.apply(t,n);function a(e){r(s,i,o,a,c,"next",e)}function c(e){r(s,i,o,a,c,"throw",e)}a(void 0)}))}}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(150),i=function(){return Object(r.v4)().replace(new RegExp("-","g"),"").toUpperCase()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(26),i=n(18),o=n(19),s=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"throwIfNullOrUndefined",value:function(e,t){if(void 0===e||null===e)throw new Error("throwIfNullOrUndefined:"+t)}},{key:"throwIfNull",value:function(e,t){if(null===e)throw new Error("throwIfNull:"+t)}},{key:"throwIfNullOrWhitespace",value:function(t,n){if(e.throwIfNullOrUndefined(t,n),(""+t).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+n)}},{key:"throwIfDisposed",value:function(e){if(e)throw new Error("the object is already disposed")}},{key:"throwIfArrayEmptyOrWhitespace",value:function(t,n){if(e.throwIfNullOrUndefined(t,n),0===t.length)throw new Error("throwIfArrayEmptyOrWhitespace:"+n);var i,o=Object(r.a)(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;e.throwIfNullOrWhitespace(s,n)}}catch(a){o.e(a)}finally{o.f()}}},{key:"throwIfFileDoesNotExist",value:function(t,n){e.throwIfNullOrWhitespace(t,n)}},{key:"throwIfNotUndefined",value:function(e,t){if(void 0!==e)throw new Error("throwIfNotUndefined:"+t)}}]),e}()},function(e,t,n){var r=n(49);e.exports=function(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw s}}}}},,function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n(22),i=n(23),o=n(18),s=n(19),a=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,null,[{key:"getDefaultInputFormat",value:function(){return c.getDefaultInputFormat()}},{key:"getWaveFormatPCM",value:function(e,t,n){return new c(e,t,n)}}]),e}(),c=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16e3,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Object(o.a)(this,n),(e=t.call(this)).setString=function(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))},e.formatTag=1,e.bitsPerSample=i,e.samplesPerSec=r,e.channels=s,e.avgBytesPerSec=e.samplesPerSec*e.channels*(e.bitsPerSample/8),e.blockAlign=e.channels*Math.max(e.bitsPerSample,8),e.privHeader=new ArrayBuffer(44);var a=new DataView(e.privHeader);return e.setString(a,0,"RIFF"),a.setUint32(4,0,!0),e.setString(a,8,"WAVEfmt "),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,e.channels,!0),a.setUint32(24,e.samplesPerSec,!0),a.setUint32(28,e.avgBytesPerSec,!0),a.setUint16(32,e.channels*(e.bitsPerSample/8),!0),a.setUint16(34,e.bitsPerSample,!0),e.setString(a,36,"data"),a.setUint32(40,0,!0),e}return Object(s.a)(n,[{key:"close",value:function(){}},{key:"header",get:function(){return this.privHeader}}],[{key:"getDefaultInputFormat",value:function(){return new n}},{key:"getAudioContext",value:function(e){var t=window.AudioContext||window.webkitAudioContext||!1;if(t)return void 0!==e&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new t({sampleRate:e}):new t;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}}]),n}(a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(18),i=function e(){Object(r.a)(this,e)};i.AuthKey="Ocp-Apim-Subscription-Key",i.ConnectionId="X-ConnectionId",i.ContentType="Content-Type",i.CustomCommandsAppId="X-CommandsAppId",i.Path="Path",i.RequestId="X-RequestId",i.RequestStreamId="X-StreamId",i.RequestTimestamp="X-Timestamp"},function(e,t,n){"use strict";n.d(t,"d",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return v}));var r,i=n(18),o=n(19),s=n(22),a=n(23),c=n(55),u=function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e,r,o){var s,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.a.Info;return Object(i.a)(this,n),(s=t.call(this,e,a)).privRequestId=r,s.privSessionId=o,s}return Object(o.a)(n,[{key:"requestId",get:function(){return this.privRequestId}},{key:"sessionId",get:function(){return this.privSessionId}}]),n}(c.b),h=function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e,r,o,s){var a;return Object(i.a)(this,n),(a=t.call(this,"RecognitionTriggeredEvent",e,r)).privAudioSourceId=o,a.privAudioNodeId=s,a}return Object(o.a)(n,[{key:"audioSourceId",get:function(){return this.privAudioSourceId}},{key:"audioNodeId",get:function(){return this.privAudioNodeId}}]),n}(u),p=function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e,r,o,s){var a;return Object(i.a)(this,n),(a=t.call(this,"ListeningStartedEvent",e,r)).privAudioSourceId=o,a.privAudioNodeId=s,a}return Object(o.a)(n,[{key:"audioSourceId",get:function(){return this.privAudioSourceId}},{key:"audioNodeId",get:function(){return this.privAudioNodeId}}]),n}(u),f=function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e,r,o){var s;return Object(i.a)(this,n),(s=t.call(this,"ConnectingToServiceEvent",e,o)).privAuthFetchEventid=r,s}return Object(o.a)(n,[{key:"authFetchEventid",get:function(){return this.privAuthFetchEventid}}]),n}(u),v=function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e,r,o,s,a){var c;return Object(i.a)(this,n),(c=t.call(this,"RecognitionStartedEvent",e,a)).privAudioSourceId=r,c.privAudioNodeId=o,c.privAuthFetchEventId=s,c}return Object(o.a)(n,[{key:"audioSourceId",get:function(){return this.privAudioSourceId}},{key:"audioNodeId",get:function(){return this.privAudioNodeId}},{key:"authFetchEventId",get:function(){return this.privAuthFetchEventId}}]),n}(u);!function(e){e[e.Success=0]="Success",e[e.AudioSourceError=1]="AudioSourceError",e[e.AudioSourceTimeout=2]="AudioSourceTimeout",e[e.AuthTokenFetchError=3]="AuthTokenFetchError",e[e.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",e[e.UnAuthorized=5]="UnAuthorized",e[e.ConnectTimeout=6]="ConnectTimeout",e[e.ConnectError=7]="ConnectError",e[e.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",e[e.UnknownError=9]="UnknownError"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(18),i=n(19),o=function(){function e(t,n){Object(r.a)(this,e),this.privHeaderName=t,this.privToken=n}return Object(i.a)(e,[{key:"headerName",get:function(){return this.privHeaderName}},{key:"token",get:function(){return this.privToken}}]),e}()},,function(e,t,n){var r=n(62);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,u=[],h=!1,p=-1;function f(){h&&c&&(h=!1,c.length?u=c.concat(u):p=-1,u.length&&v())}function v(){if(!h){var e=a(f);h=!0;for(var t=u.length;t;){for(c=u,u=[];++p<t;)c&&c[p].run();p=-1,t=u.length}c=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function l(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new d(e,t)),1!==u.length||h||a(v)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=l,i.addListener=l,i.once=l,i.off=l,i.removeListener=l,i.removeAllListeners=l,i.emit=l,i.prependListener=l,i.prependOnceListener=l,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){var r=n(66);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},,function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r,i=n(18),o=n(19),s=n(34);!function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(r||(r={}));var a=function(){function e(t,n){Object(i.a)(this,e),this.privName=t,this.privEventId=Object(s.a)(),this.privEventTime=(new Date).toISOString(),this.privEventType=n,this.privMetadata={}}return Object(o.a)(e,[{key:"name",get:function(){return this.privName}},{key:"eventId",get:function(){return this.privEventId}},{key:"eventTime",get:function(){return this.privEventTime}},{key:"eventType",get:function(){return this.privEventType}},{key:"metadata",get:function(){return this.privMetadata}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return m}));var r=n(20),i=n.n(r),o=n(22),s=n(23),a=n(18),c=n(19),u=n(34),h=n(196),p=n(35),f=n(74),v=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},d=function(){function e(){Object(a.a)(this,e)}return Object(c.a)(e,null,[{key:"createPullStream",value:function(){return l.create()}}]),e}(),l=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"create",value:function(){return new y}}]),n}(d),y=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).privId=Object(u.a)(),e.privStream=new h.a,e}return Object(c.a)(n,[{key:"format",get:function(){return this.privFormat},set:function(e){void 0!==e&&null!==e||(this.privFormat=f.b.getDefaultOutputFormat()),this.privFormat=e}},{key:"isClosed",get:function(){return this.privStream.isClosed}},{key:"id",value:function(){return this.privId}},{key:"read",value:function(e){return v(this,void 0,void 0,i.a.mark((function t(){var n,r,o,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new Int8Array(e),r=0,void 0===this.privLastChunkView){t.next=10;break}if(!(this.privLastChunkView.length>e.byteLength)){t.next=7;break}return n.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),t.abrupt("return",Promise.resolve(e.byteLength));case 7:n.set(this.privLastChunkView),r=this.privLastChunkView.length,this.privLastChunkView=void 0;case 10:if(!(r<e.byteLength)||this.privStream.isReadEnded){t.next=25;break}return t.next=13,this.privStream.read();case 13:if(void 0===(o=t.sent)||o.isEnd){t.next=21;break}s=void 0,o.buffer.byteLength>e.byteLength-r?(s=o.buffer.slice(0,e.byteLength-r),this.privLastChunkView=new Int8Array(o.buffer.slice(e.byteLength-r))):s=o.buffer,n.set(new Int8Array(s),r),r+=s.byteLength,t.next=23;break;case 21:return t.next=23,this.privStream.readEnded();case 23:t.next=10;break;case 25:return t.abrupt("return",r);case 26:case"end":return t.stop()}}),t,this)})))}},{key:"write",value:function(e){p.a.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},{key:"close",value:function(){this.privStream.close()}}]),n}(l),g=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.call(this)}return Object(c.a)(n,null,[{key:"create",value:function(e){return new m(e)}}]),n}(d),m=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this)).privId=Object(u.a)(),r.privCallback=e,r}return Object(c.a)(n,[{key:"format",set:function(e){}},{key:"write",value:function(e){this.privCallback.write&&this.privCallback.write(e)}},{key:"close",value:function(){this.privCallback.close&&this.privCallback.close()}},{key:"id",value:function(){return this.privId}}]),n}(g)},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var r=n(26),i=n(20),o=n.n(i),s=n(18),a=n(19),c=n(159),u=n(30),h=n(153),p=n(203),f=n(204),v=n(34),d=n(199),l=n(200),y=function(){function e(t){Object(s.a)(this,e),this.privResult=t}return Object(a.a)(e,[{key:"result",get:function(){return this.privResult}}]),e}(),g=function(){function e(t,n,r,i,o){Object(s.a)(this,e),this.privResultId=t,this.privReason=n,this.privAudioData=r,this.privErrorDetails=i,this.privProperties=o}return Object(a.a)(e,[{key:"resultId",get:function(){return this.privResultId}},{key:"reason",get:function(){return this.privReason}},{key:"audioData",get:function(){return this.privAudioData}},{key:"errorDetails",get:function(){return this.privErrorDetails}},{key:"properties",get:function(){return this.privProperties}}]),e}(),m=n(201),S=n(202),b=function(){function e(t,n,r,i){Object(s.a)(this,e),this.privAudioOffset=t,this.privText=n,this.privWordLength=r,this.privTextOffset=i}return Object(a.a)(e,[{key:"audioOffset",get:function(){return this.privAudioOffset}},{key:"text",get:function(){return this.privText}},{key:"wordLength",get:function(){return this.privWordLength}},{key:"textOffset",get:function(){return this.privTextOffset}}]),e}(),w=function(){function e(t,n){Object(s.a)(this,e),this.privAudioOffset=t,this.privText=n}return Object(a.a)(e,[{key:"audioOffset",get:function(){return this.privAudioOffset}},{key:"text",get:function(){return this.privText}}]),e}(),k=function(){function e(t,n,r){Object(s.a)(this,e),this.privAudioOffset=t,this.privVisemeId=n,this.privAnimation=r}return Object(a.a)(e,[{key:"audioOffset",get:function(){return this.privAudioOffset}},{key:"visemeId",get:function(){return this.privVisemeId}},{key:"animation",get:function(){return this.privAnimation}}]),e}(),O=n(198),C=n(99),R=n(76),P=n(77),E=n(25),I=n(78),x=n(75),A=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},T=function(){function e(t,n,r,i,o){var a=this;if(Object(s.a)(this,e),this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.sendSynthesisContext=function(e){var t=a.synthesisContext.toJSON();if(t)return e.send(new x.a(c.b.Text,"synthesis.context",a.privSynthesisTurn.requestId,"application/json",t))},this.sendSpeechServiceConfig=function(e,t){if(t)return e.send(new x.a(c.b.Text,"speech.config",a.privSynthesisTurn.requestId,"application/json",t))},this.sendSsmlMessage=function(e,t,n){return e.send(new x.a(c.b.Text,"ssml",n,"application/ssml+xml",t))},!t)throw new u.a("authentication");if(!n)throw new u.a("connectionFactory");if(!r)throw new u.a("synthesizerConfig");this.privAuthentication=t,this.privConnectionFactory=n,this.privSynthesizerConfig=r,this.privIsDisposed=!1,this.privSpeechSynthesizer=i,this.privSessionAudioDestination=o,this.privSynthesisTurn=new C.a,this.privConnectionEvents=new h.a,this.privServiceEvents=new h.a,this.privSynthesisContext=new R.a(this.privSpeechSynthesizer),this.privAgentConfig=new P.a,this.connectionEvents.attach((function(e){if("ConnectionClosedEvent"===e.name){var t=e;1e3!==t.statusCode&&a.cancelSynthesisLocal(d.a.Error,1007===t.statusCode?l.a.BadRequestParameters:l.a.ConnectionFailure,t.reason+" websocket error code: "+t.statusCode)}}))}return Object(a.a)(e,[{key:"synthesisContext",get:function(){return this.privSynthesisContext}},{key:"agentConfig",get:function(){return this.privAgentConfig}},{key:"connectionEvents",get:function(){return this.privConnectionEvents}},{key:"serviceEvents",get:function(){return this.privServiceEvents}},{key:"activityTemplate",get:function(){return this.privActivityTemplate},set:function(e){this.privActivityTemplate=e}},{key:"audioOutputFormat",set:function(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=e),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=e)}},{key:"isDisposed",value:function(){return this.privIsDisposed}},{key:"dispose",value:function(e){return A(this,void 0,void 0,o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),!this.privConnectionConfigurationPromise){t.next=8;break}return t.next=5,this.privConnectionConfigurationPromise;case 5:return n=t.sent,t.next=8,n.dispose(e);case 8:case"end":return t.stop()}}),t,this)})))}},{key:"connect",value:function(){return A(this,void 0,void 0,o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connectImpl();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"sendNetworkMessage",value:function(e,t){return A(this,void 0,void 0,o.a.mark((function n(){var r,i,s;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="string"===typeof t?c.b.Text:c.b.Binary,i="string"===typeof t?"application/json":"",n.next=4,this.fetchConnection();case 4:return s=n.sent,n.abrupt("return",s.send(new x.a(r,e,this.privSynthesisTurn.requestId,i,t)));case 6:case"end":return n.stop()}}),n,this)})))}},{key:"Speak",value:function(e,t,n,r,i,s){return A(this,void 0,void 0,o.a.mark((function a(){var c,u,h;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(c=t?e:this.privSpeechSynthesizer.buildSsml(e),void 0===this.speakOverride){o.next=3;break}return o.abrupt("return",this.speakOverride(c,n,r,i));case 3:return this.privSuccessCallback=r,this.privErrorCallback=i,this.privSynthesisTurn.startNewSynthesis(n,e,t,s),o.prev=6,o.next=9,this.connectImpl();case 9:return o.next=11,this.fetchConnection();case 11:return u=o.sent,o.next=14,this.sendSynthesisContext(u);case 14:return o.next=16,this.sendSsmlMessage(u,c,n);case 16:h=new y(new g(n,m.a.SynthesizingAudioStarted)),this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,h),this.receiveMessage(),o.next=25;break;case 21:return o.prev=21,o.t0=o.catch(6),this.cancelSynthesisLocal(d.a.Error,l.a.ConnectionFailure,o.t0),o.abrupt("return",Promise.reject(o.t0));case 25:case"end":return o.stop()}}),a,this,[[6,21]])})))}},{key:"cancelSynthesis",value:function(e,t,n,r){var i=new S.a;i.setProperty(E.CancellationErrorCodePropertyName,l.a[n]);var o=new g(e,m.a.Canceled,void 0,r,i);if(this.privSpeechSynthesizer.SynthesisCanceled){var s=new y(o);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,s)}catch(a){}}if(this.privSuccessCallback)try{this.privSuccessCallback(o)}catch(c){}}},{key:"cancelSynthesisLocal",value:function(e,t,n){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,t,n))}},{key:"processTypeSpecificMessages",value:function(e,t,n){return!0}},{key:"receiveMessage",value:function(){return A(this,void 0,void 0,o.a.mark((function t(){var n,i,s,a,c,u,h,f,v,d,l,S,O,C;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.fetchConnection();case 3:return n=t.sent,t.next=6,n.read();case 6:if(i=t.sent,void 0===this.receiveMessageOverride){t.next=9;break}return t.abrupt("return",this.receiveMessageOverride());case 9:if(!this.privIsDisposed){t.next=11;break}return t.abrupt("return");case 11:if(i){t.next=17;break}if(this.privSynthesisTurn.isSynthesizing){t.next=16;break}return t.abrupt("return");case 16:return t.abrupt("return",this.receiveMessage());case 17:if(this.privServiceHasSentMessage=!0,(s=x.a.fromConnectionMessage(i)).requestId.toLowerCase()!==this.privSynthesisTurn.requestId.toLowerCase()){t.next=74;break}t.t0=s.path.toLowerCase(),t.next="turn.start"===t.t0?23:"response"===t.t0?25:"audio"===t.t0?27:"audio.metadata"===t.t0?29:"turn.end"===t.t0?59:73;break;case 23:return this.privSynthesisTurn.onServiceTurnStartResponse(),t.abrupt("break",74);case 25:return this.privSynthesisTurn.onServiceResponseMessage(s.textBody),t.abrupt("break",74);case 27:if(this.privSynthesisTurn.streamId.toLowerCase()===s.streamId.toLowerCase()&&s.binaryBody){if(this.privSynthesisTurn.onAudioChunkReceived(s.binaryBody),this.privSpeechSynthesizer.synthesizing)try{a=e.addHeader(s.binaryBody,this.privSynthesisTurn.audioOutputFormat),c=new y(new g(this.privSynthesisTurn.requestId,m.a.SynthesizingAudio,a)),this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,c)}catch(o){}void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(s.binaryBody)}return t.abrupt("break",74);case 29:u=I.b.fromJSON(s.textBody).Metadata,h=Object(r.a)(u),t.prev=31,h.s();case 33:if((f=h.n()).done){t.next=50;break}v=f.value,t.t1=v.Type,t.next=t.t1===I.a.WordBoundary?38:t.t1===I.a.Bookmark?42:t.t1===I.a.Viseme?45:48;break;case 38:if(this.privSynthesisTurn.onWordBoundaryEvent(v.Data.text.Text),d=new b(v.Data.Offset,v.Data.text.Text,v.Data.text.Length,this.privSynthesisTurn.currentTextOffset),this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,d)}catch(o){}return t.abrupt("break",48);case 42:if(l=new w(v.Data.Offset,v.Data.Bookmark),this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,l)}catch(o){}return t.abrupt("break",48);case 45:if(this.privSynthesisTurn.onVisemeMetadataReceived(v),v.Data.IsLastAnimation&&(S=new k(v.Data.Offset,v.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation()),this.privSpeechSynthesizer.visemeReceived))try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,S)}catch(o){}return t.abrupt("break",48);case 48:t.next=33;break;case 50:t.next=55;break;case 52:t.prev=52,t.t2=t.catch(31),h.e(t.t2);case 55:return t.prev=55,h.f(),t.finish(55);case 58:return t.abrupt("break",74);case 59:return this.privSynthesisTurn.onServiceTurnEndResponse(),t.prev=60,t.next=63,this.privSynthesisTurn.getAllReceivedAudioWithHeader();case 63:C=t.sent,O=new g(this.privSynthesisTurn.requestId,m.a.SynthesizingAudioCompleted,C),this.privSuccessCallback&&this.privSuccessCallback(O),t.next=71;break;case 68:t.prev=68,t.t3=t.catch(60),this.privErrorCallback&&this.privErrorCallback(t.t3);case 71:if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new y(O))}catch(R){}return t.abrupt("break",74);case 73:this.processTypeSpecificMessages(s)||this.privServiceEvents&&this.serviceEvents.onEvent(new p.h(s.path.toLowerCase(),s.textBody));case 74:return t.abrupt("return",this.receiveMessage());case 77:t.prev=77,t.t4=t.catch(0);case 79:case"end":return t.stop()}}),t,this,[[0,77],[31,52,55,58],[60,68]])})))}},{key:"connectImpl",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.privConnectionPromise)return this.privConnectionPromise.then((function(t){return t.state()===f.a.Disconnected?(e.privConnectionId=null,e.privConnectionPromise=null,e.privServiceHasSentMessage=!1,e.connectImpl()):e.privConnectionPromise}),(function(t){return e.privConnectionId=null,e.privConnectionPromise=null,e.privServiceHasSentMessage=!1,e.connectImpl()}));this.privAuthFetchEventId=Object(v.a)(),this.privConnectionId=Object(v.a)(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);var n=t?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=n.then((function(n){return A(e,void 0,void 0,o.a.mark((function e(){var r,i,s=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.privSynthesisTurn.onAuthCompleted(!1);case 2:return(r=this.privConnectionFactory.create(this.privSynthesizerConfig,n,this.privConnectionId)).events.attach((function(e){s.connectionEvents.onEvent(e)})),e.next=6,r.open();case 6:if(200!==(i=e.sent).statusCode){e.next=13;break}return e.next=10,this.privSynthesisTurn.onConnectionEstablishCompleted(i.statusCode);case 10:return e.abrupt("return",Promise.resolve(r));case 13:if(403!==i.statusCode||t){e.next=17;break}return e.abrupt("return",this.connectImpl(!0));case 17:return e.next=19,this.privSynthesisTurn.onConnectionEstablishCompleted(i.statusCode,i.reason);case 19:return e.abrupt("return",Promise.reject("Unable to contact server. StatusCode: ".concat(i.statusCode,", ").concat(this.privSynthesizerConfig.parameters.getProperty(O.a.SpeechServiceConnection_Endpoint)," Reason: ").concat(i.reason)));case 20:case"end":return e.stop()}}),e,this)})))}),(function(t){return A(e,void 0,void 0,o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.privSynthesisTurn.onAuthCompleted(!0,t);case 2:throw new Error(t);case 3:case"end":return e.stop()}}),e,this)})))})),this.privConnectionPromise.catch((function(){})),this.privConnectionPromise}},{key:"fetchConnection",value:function(){return A(this,void 0,void 0,o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.privConnectionConfigurationPromise){e.next=2;break}return e.abrupt("return",this.privConnectionConfigurationPromise.then((function(e){return e.state()===f.a.Disconnected?(t.privConnectionId=null,t.privConnectionConfigurationPromise=null,t.privServiceHasSentMessage=!1,t.fetchConnection()):t.privConnectionConfigurationPromise}),(function(e){return t.privConnectionId=null,t.privConnectionConfigurationPromise=null,t.privServiceHasSentMessage=!1,t.fetchConnection()})));case 2:return this.privConnectionConfigurationPromise=this.configureConnection(),e.next=5,this.privConnectionConfigurationPromise;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"configureConnection",value:function(){return A(this,void 0,void 0,o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connectImpl();case 2:if(t=e.sent,void 0===this.configConnectionOverride){e.next=5;break}return e.abrupt("return",this.configConnectionOverride(t));case 5:return e.next=7,this.sendSpeechServiceConfig(t,this.privSynthesizerConfig.SpeechServiceConfig.serialize());case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})))}}],[{key:"addHeader",value:function(e,t){if(!t.hasHeader)return e;t.updateHeader(e.byteLength);var n=new Uint8Array(e.byteLength+t.header.byteLength);return n.set(new Uint8Array(t.header),0),n.set(new Uint8Array(e),t.header.byteLength),n.buffer}}]),e}();T.telemetryDataEnabled=!0},,function(e,t,n){var r=n(122),i=n(123),o=n(49),s=n(124);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||s()}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t){function n(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var s=e.apply(t,r);function a(e){n(s,i,o,a,c,"next",e)}function c(e){n(s,i,o,a,c,"throw",e)}a(void 0)}))}}},,function(e,t){},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},,,function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}n.d(t,"a",(function(){return r}))},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u}));var r,i,o=n(18),s=n(19),a=n(198);!function(e){e[e.Interactive=0]="Interactive",e[e.Conversation=1]="Conversation",e[e.Dictation=2]="Dictation"}(r||(r={})),function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(i||(i={}));var c,u,h=function(){function e(t,n){Object(o.a)(this,e),this.privRecognitionMode=r.Interactive,this.privSpeechServiceConfig=t||new p(new f(null)),this.privParameters=n}return Object(s.a)(e,[{key:"parameters",get:function(){return this.privParameters}},{key:"recognitionMode",get:function(){return this.privRecognitionMode},set:function(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===r.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=r[e]}},{key:"SpeechServiceConfig",get:function(){return this.privSpeechServiceConfig}},{key:"recognitionActivityTimeout",get:function(){return this.privRecognitionActivityTimeout}},{key:"isContinuousRecognition",get:function(){return this.privRecognitionMode!==r.Interactive}},{key:"autoDetectSourceLanguages",get:function(){return this.parameters.getProperty(a.a.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}}]),e}(),p=function(){function e(t){var n=this;Object(o.a)(this,e),this.serialize=function(){return JSON.stringify(n,(function(e,t){if(t&&"object"===typeof t){var n={};for(var r in t)Object.hasOwnProperty.call(t,r)&&(n[r&&r.charAt(0).toLowerCase()+r.substring(1)]=t[r]);return n}return t}))},this.context=t}return Object(s.a)(e,[{key:"Context",get:function(){return this.context}},{key:"Recognition",get:function(){return this.recognition},set:function(e){this.recognition=e.toLowerCase()}}]),e}(),f=function e(t){Object(o.a)(this,e),this.system=new v,this.os=t},v=function e(){Object(o.a)(this,e);this.name="SpeechSDK",this.version="1.16.0",this.build="JavaScript",this.lang="JavaScript"},d=function e(t,n,r){Object(o.a)(this,e),this.platform=t,this.name=n,this.version=r};!function(e){e.Bluetooth="Bluetooth",e.Wired="Wired",e.WiFi="WiFi",e.Cellular="Cellular",e.InBuilt="InBuilt",e.Unknown="Unknown"}(c||(c={})),function(e){e.Phone="Phone",e.Speaker="Speaker",e.Car="Car",e.Headset="Headset",e.Thermostat="Thermostat",e.Microphones="Microphones",e.Deskphone="Deskphone",e.RemoteControl="RemoteControl",e.Unknown="Unknown",e.File="File",e.Stream="Stream"}(u||(u={}))},function(e,t,n){"use strict";(function(e){var r=n(155),i=n(156),o=n(157);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=f(e,t);return e}(e,t,n,r):"string"===typeof t?function(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(t,n),i=(e=a(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|v(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(r=t.length)!==r?a(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function h(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t){if(h(t),e=a(e,t<0?0:0|v(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|v(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function v(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function d(e,t){if(c.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function l(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return I(this,t,n);case"latin1":case"binary":return x(this,t,n);case"base64":return R(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"===typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var h=-1;for(o=n;o<a;o++)if(u(e,o)===u(t,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===c)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var p=!0,f=0;f<c;f++)if(u(e,o+f)!==u(t,f)){p=!1;break}if(p)return o}return-1}function S(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function b(e,t,n,r){return K(U(t,e.length-n),e,n,r)}function w(e,t,n,r){return K(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function k(e,t,n,r){return w(e,t,n,r)}function O(e,t,n,r){return K(q(t),e,n,r)}function C(e,t,n,r){return K(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function R(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function P(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,c,u=e[i],h=null,p=u>239?4:u>223?3:u>191?2:1;if(i+p<=n)switch(p){case 1:u<128&&(h=u);break;case 2:128===(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(h=c);break;case 3:o=e[i+1],s=e[i+2],128===(192&o)&&128===(192&s)&&(c=(15&u)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(h=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128===(192&o)&&128===(192&s)&&128===(192&a)&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(h=c)}null===h?(h=65533,p=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=p}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=E));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return h(t),t<=0?a(e,t):void 0!==n?"string"===typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return p(null,e)},c.allocUnsafeSlow=function(e){return p(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},c.byteLength=d,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):l.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(r,i),h=e.slice(t,n),p=0;p<a;++p)if(u[p]!==h[p]){o=u[p],s=h[p];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return S(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return O(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=F(e[o]);return i}function T(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function j(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function M(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function _(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function B(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(e,t,n,r,o){return o||B(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,o){return o||B(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||j(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||j(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||j(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||j(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||j(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||j(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||j(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||j(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||j(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):_(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):_(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):_(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):_(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return z(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return z(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=c.isBuffer(e)?e:U(new c(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(N,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function K(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(42))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return f}));var r,i,o=n(53),s=n(18),a=n(19),c=n(22),u=n(23),h=n(158),p=n(44);!function(e){e[e.PCM=1]="PCM",e[e.MuLaw=2]="MuLaw",e[e.Siren=3]="Siren",e[e.MP3=4]="MP3",e[e.SILKSkype=5]="SILKSkype",e[e.OGG_OPUS=6]="OGG_OPUS",e[e.WEBM_OPUS=7]="WEBM_OPUS"}(i||(i={}));var f=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e,r,i,o,a,c,u,h,p){var f;return Object(s.a)(this,n),(f=t.call(this,i,c,r)).formatTag=e,f.avgBytesPerSec=o,f.blockAlign=a,f.priAudioFormatString=u,f.priRequestAudioFormatString=h,f.priHasHeader=p,f}return Object(a.a)(n,[{key:"hasHeader",get:function(){return this.priHasHeader}},{key:"header",get:function(){if(this.hasHeader)return this.privHeader}},{key:"updateHeader",value:function(e){this.priHasHeader&&new DataView(this.privHeader).setUint32(40,e,!0)}},{key:"requestAudioFormatString",get:function(){return this.priRequestAudioFormatString}}],[{key:"fromSpeechSynthesisOutputFormat",value:function(e){return void 0===e?n.getDefaultOutputFormat():n.fromSpeechSynthesisOutputFormatString(n.SpeechSynthesisOutputFormatToString[e])}},{key:"fromSpeechSynthesisOutputFormatString",value:function(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new n(i.PCM,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new n(i.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new n(i.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new n(i.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new n(i.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new n(i.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new n(i.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new n(i.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new n(i.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new n(i.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new n(i.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new n(i.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new n(i.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new n(i.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new n(i.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new n(i.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new n(i.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new n(i.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new n(i.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new n(i.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new n(i.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new n(i.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new n(i.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new n(i.WEBM_OPUS,1,16e3,8e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new n(i.WEBM_OPUS,1,24e3,8e3,2,16,e,e,!1);case"riff-16khz-16bit-mono-pcm":default:return new n(i.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}},{key:"getDefaultOutputFormat",value:function(){return n.fromSpeechSynthesisOutputFormatString("undefined"!==typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}}]),n}(p.b);f.SpeechSynthesisOutputFormatToString=(r={},Object(o.a)(r,h.a.Raw8Khz8BitMonoMULaw,"raw-8khz-8bit-mono-mulaw"),Object(o.a)(r,h.a.Riff16Khz16KbpsMonoSiren,"riff-16khz-16kbps-mono-siren"),Object(o.a)(r,h.a.Audio16Khz16KbpsMonoSiren,"audio-16khz-16kbps-mono-siren"),Object(o.a)(r,h.a.Audio16Khz32KBitRateMonoMp3,"audio-16khz-32kbitrate-mono-mp3"),Object(o.a)(r,h.a.Audio16Khz128KBitRateMonoMp3,"audio-16khz-128kbitrate-mono-mp3"),Object(o.a)(r,h.a.Audio16Khz64KBitRateMonoMp3,"audio-16khz-64kbitrate-mono-mp3"),Object(o.a)(r,h.a.Audio24Khz48KBitRateMonoMp3,"audio-24khz-48kbitrate-mono-mp3"),Object(o.a)(r,h.a.Audio24Khz96KBitRateMonoMp3,"audio-24khz-96kbitrate-mono-mp3"),Object(o.a)(r,h.a.Audio24Khz160KBitRateMonoMp3,"audio-24khz-160kbitrate-mono-mp3"),Object(o.a)(r,h.a.Raw16Khz16BitMonoTrueSilk,"raw-16khz-16bit-mono-truesilk"),Object(o.a)(r,h.a.Riff16Khz16BitMonoPcm,"riff-16khz-16bit-mono-pcm"),Object(o.a)(r,h.a.Riff8Khz16BitMonoPcm,"riff-8khz-16bit-mono-pcm"),Object(o.a)(r,h.a.Riff24Khz16BitMonoPcm,"riff-24khz-16bit-mono-pcm"),Object(o.a)(r,h.a.Riff8Khz8BitMonoMULaw,"riff-8khz-8bit-mono-mulaw"),Object(o.a)(r,h.a.Raw16Khz16BitMonoPcm,"raw-16khz-16bit-mono-pcm"),Object(o.a)(r,h.a.Raw24Khz16BitMonoPcm,"raw-24khz-16bit-mono-pcm"),Object(o.a)(r,h.a.Raw8Khz16BitMonoPcm,"raw-8khz-16bit-mono-pcm"),Object(o.a)(r,h.a.Ogg16Khz16BitMonoOpus,"ogg-16khz-16bit-mono-opus"),Object(o.a)(r,h.a.Ogg24Khz16BitMonoOpus,"ogg-24khz-16bit-mono-opus"),Object(o.a)(r,h.a.Raw48Khz16BitMonoPcm,"raw-48khz-16bit-mono-pcm"),Object(o.a)(r,h.a.Riff48Khz16BitMonoPcm,"riff-48khz-16bit-mono-pcm"),Object(o.a)(r,h.a.Audio48Khz96KBitRateMonoMp3,"audio-48khz-96kbitrate-mono-mp3"),Object(o.a)(r,h.a.Audio48Khz192KBitRateMonoMp3,"audio-48khz-192kbitrate-mono-mp3"),Object(o.a)(r,h.a.Ogg48Khz16BitMonoOpus,"ogg-48khz-16bit-mono-opus"),Object(o.a)(r,h.a.Webm16Khz16BitMonoOpus,"webm-16khz-16bit-mono-opus"),Object(o.a)(r,h.a.Webm24Khz16BitMonoOpus,"webm-24khz-16bit-mono-opus"),r)},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(18),i=n(19),o=n(95),s=n(22),a=n(23),c=n(30),u=n(159),h=n(45),p=function(e){Object(s.a)(n,e);var t=Object(a.a)(n);function n(e,i,s,a,u,p,f,v){var d;if(Object(r.a)(this,n),!i)throw new c.a("path");if(!s)throw new c.a("requestId");var l={};if(l[h.a.Path]=i,l[h.a.RequestId]=s,l[h.a.RequestTimestamp]=(new Date).toISOString(),a&&(l[h.a.ContentType]=a),p&&(l[h.a.RequestStreamId]=p),f)for(var y in f)y&&(l[y]=f[y]);return(d=v?t.call(this,e,u,l,v):t.call(this,e,u,l)).privPath=i,d.privRequestId=s,d.privContentType=a,d.privStreamId=p,d.privAdditionalHeaders=f,Object(o.a)(d)}return Object(i.a)(n,[{key:"path",get:function(){return this.privPath}},{key:"requestId",get:function(){return this.privRequestId}},{key:"contentType",get:function(){return this.privContentType}},{key:"streamId",get:function(){return this.privStreamId}},{key:"additionalHeaders",get:function(){return this.privAdditionalHeaders}}]),n}(u.a);p.fromConnectionMessage=function(e){var t=null,n=null,r=null,i=null,o={};if(e.headers)for(var s in e.headers)s&&(s.toLowerCase()===h.a.Path.toLowerCase()?t=e.headers[s]:s.toLowerCase()===h.a.RequestId.toLowerCase()?n=e.headers[s]:s.toLowerCase()===h.a.RequestTimestamp.toLowerCase()?e.headers[s]:s.toLowerCase()===h.a.ContentType.toLowerCase()?r=e.headers[s]:s.toLowerCase()===h.a.RequestStreamId.toLowerCase()?i=e.headers[s]:o[s]=e.headers[s]);return new p(e.messageType,t,n,r,e.body,i,o,e.id)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(18),i=n(19),o=function(){function e(t){Object(r.a)(this,e),this.privContext={},this.privSpeechSynthesizer=t}return Object(i.a)(e,[{key:"setSection",value:function(e,t){this.privContext[e]=t}},{key:"audioOutputFormat",set:function(e){this.privAudioOutputFormat=e}},{key:"toJSON",value:function(){var e=this.buildSynthesisContext();return this.setSection("synthesis",e),JSON.stringify(this.privContext)}},{key:"buildSynthesisContext",value:function(){return{audio:{metadataOptions:{bookmarkEnabled:!!this.privSpeechSynthesizer.bookmarkReached,sentenceBoundaryEnabled:!1,visemeEnabled:!!this.privSpeechSynthesizer.visemeReceived,wordBoundaryEnabled:!!this.privSpeechSynthesizer.wordBoundary},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:this.privSpeechSynthesizer.autoDetectSourceLanguage}}}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(18),i=n(19),o=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,[{key:"toJsonString",value:function(){return JSON.stringify(this.iPrivConfig)}},{key:"get",value:function(){return this.iPrivConfig}},{key:"set",value:function(e){this.iPrivConfig=e}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var r,i=n(18),o=n(19);!function(e){e.WordBoundary="WordBoundary",e.Bookmark="Bookmark",e.Viseme="Viseme"}(r||(r={}));var s=function(){function e(t){Object(i.a)(this,e),this.privSynthesisAudioMetadata=JSON.parse(t)}return Object(o.a)(e,[{key:"Metadata",get:function(){return this.privSynthesisAudioMetadata.Metadata}}],[{key:"fromJSON",value:function(t){return new e(t)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(18),i=n(19),o=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,[{key:"addPhrase",value:function(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}},{key:"clearPhrases",value:function(){this.privPhrases=void 0}},{key:"addReferenceGrammar",value:function(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}},{key:"clearGrammars",value:function(){this.privGrammars=void 0}},{key:"generateGrammarObject",value:function(){if(void 0!==this.privGrammars||void 0!==this.privPhrases){var e={};if(e.ReferenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){var t=[];this.privPhrases.forEach((function(e,n,r){t.push({Text:e})})),e.Groups=[{Type:"Generic",Items:t}]}return e}}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(18),i=n(19),o=function(){function e(t){Object(r.a)(this,e),this.privContext={},this.privDynamicGrammar=t}return Object(i.a)(e,[{key:"setSection",value:function(e,t){this.privContext[e]=t}},{key:"setPronunciationAssessmentParams",value:function(e){void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),-1===this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}},{key:"toJSON",value:function(){var e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(18),i=n(19),o=function(){function e(t){Object(r.a)(this,e),this.privSpeechStartDetected=JSON.parse(t)}return Object(i.a)(e,[{key:"Offset",get:function(){return this.privSpeechStartDetected.Offset}}],[{key:"fromJSON",value:function(t){return new e(t)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(18),i=n(30),o=n(45),s=n(47),a=function e(t){var n=this;if(Object(r.a)(this,e),this.fetch=function(e){return Promise.resolve(n.privAuthInfo)},this.fetchOnExpiry=function(e){return Promise.resolve(n.privAuthInfo)},!t)throw new i.a("subscriptionKey");this.privAuthInfo=new s.a(o.a.AuthKey,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(18),i=n(30),o=n(47),s="Authorization",a=function e(t,n){var a=this;if(Object(r.a)(this,e),this.fetch=function(e){return a.privFetchCallback(e).then((function(e){return new o.a(s,e)}))},this.fetchOnExpiry=function(e){return a.privFetchOnExpiryCallback(e).then((function(e){return new o.a(s,e)}))},!t)throw new i.a("fetchCallback");if(!n)throw new i.a("fetchOnExpiryCallback");this.privFetchCallback=t,this.privFetchOnExpiryCallback=n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(26),i=n(18),o=n(149),s=n(159),a=n(211),c=function e(){var t=this;Object(i.a)(this,e),this.toConnectionMessage=function(e){var n=new o.a;try{if(e.messageType===s.b.Text){var r=e.textContent,i={},a=null;if(r){var c=r.split("\r\n\r\n");c&&c.length>0&&(i=t.parseHeaders(c[0]),c.length>1&&(a=c[1]))}n.resolve(new s.a(e.messageType,a,i,e.id))}else if(e.messageType===s.b.Binary){var u,h=e.binaryContent,p=null;if(!h||h.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");var f=new DataView(h),v=f.getInt16(0);if(h.byteLength<v+2)throw new Error("Invalid binary message format. Header content missing.");for(var d="",l=0;l<v;l++)d+=String.fromCharCode(f.getInt8(l+2));u=t.parseHeaders(d),h.byteLength>v+2&&(p=h.slice(2+v)),n.resolve(new s.a(e.messageType,p,u,e.id))}}catch(y){n.reject("Error formatting the message. Error: ".concat(y))}return n.promise},this.fromConnectionMessage=function(e){var n=new o.a;try{if(e.messageType===s.b.Text){var r="".concat(t.makeHeaders(e)).concat("\r\n").concat(e.textBody?e.textBody:"");n.resolve(new a.a(s.b.Text,r,e.id))}else if(e.messageType===s.b.Binary){var i=t.makeHeaders(e),c=e.binaryBody,u=t.stringToArrayBuffer(i),h=new Int8Array(u),p=h.byteLength,f=new Int8Array(2+p+(c?c.byteLength:0));if(f[0]=p>>8&255,f[1]=255&p,f.set(h,2),c){var v=new Int8Array(c);f.set(v,2+p)}var d=f.buffer;n.resolve(new a.a(s.b.Binary,d,e.id))}}catch(l){n.reject("Error formatting the message. ".concat(l))}return n.promise},this.makeHeaders=function(e){var t="";if(e.headers)for(var n in e.headers)n&&(t+="".concat(n,": ").concat(e.headers[n]).concat("\r\n"));return t},this.parseHeaders=function(e){var t={};if(e){var n=e.match(/[^\r\n]+/g);if(t){var i,o=Object(r.a)(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(s){var a=s.indexOf(":"),c=a>0?s.substr(0,a).trim().toLowerCase():s,u=a>0&&s.length>a+1?s.substr(a+1).trim():"";t[c]=u}}}catch(h){o.e(h)}finally{o.f()}}}return t},this.stringToArrayBuffer=function(e){for(var t=new ArrayBuffer(e.length),n=new DataView(t),r=0;r<e.length;r++)n.setUint8(r,e.charCodeAt(r));return t}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(18),i=n(19),o=function(){function e(t){Object(r.a)(this,e),this.privSpeechHypothesis=JSON.parse(t)}return Object(i.a)(e,[{key:"Text",get:function(){return this.privSpeechHypothesis.Text}},{key:"Offset",get:function(){return this.privSpeechHypothesis.Offset}},{key:"Duration",get:function(){return this.privSpeechHypothesis.Duration}},{key:"Language",get:function(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}},{key:"LanguageDetectionConfidence",get:function(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}},{key:"SpeakerId",get:function(){return this.privSpeechHypothesis.SpeakerId}}],[{key:"fromJSON",value:function(t){return new e(t)}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(18),i=n(19),o=n(87),s=function(){function e(t){Object(r.a)(this,e),this.privSimpleSpeechPhrase=JSON.parse(t),this.privSimpleSpeechPhrase.RecognitionStatus=o.a[this.privSimpleSpeechPhrase.RecognitionStatus]}return Object(i.a)(e,[{key:"RecognitionStatus",get:function(){return this.privSimpleSpeechPhrase.RecognitionStatus}},{key:"DisplayText",get:function(){return this.privSimpleSpeechPhrase.DisplayText}},{key:"Offset",get:function(){return this.privSimpleSpeechPhrase.Offset}},{key:"Duration",get:function(){return this.privSimpleSpeechPhrase.Duration}},{key:"Language",get:function(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}},{key:"LanguageDetectionConfidence",get:function(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}},{key:"SpeakerId",get:function(){return this.privSimpleSpeechPhrase.SpeakerId}}],[{key:"fromJSON",value:function(t){return new e(t)}}]),e}()},function(e,t,n){"use strict";var r,i;n.d(t,"a",(function(){return i})),function(e){e[e.Success=0]="Success",e[e.SynthesisEnd=1]="SynthesisEnd",e[e.Error=2]="Error"}(r||(r={})),function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests"}(i||(i={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(18),i=n(19),o=n(201),s=n(199),a=n(200),c=n(87),u=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"implTranslateRecognitionResult",value:function(e){var t=o.a.Canceled;switch(e){case c.a.Success:t=o.a.RecognizedSpeech;break;case c.a.NoMatch:case c.a.InitialSilenceTimeout:case c.a.BabbleTimeout:case c.a.EndOfDictation:t=o.a.NoMatch;break;case c.a.Error:default:t=o.a.Canceled}return t}},{key:"implTranslateCancelResult",value:function(e){var t=s.a.EndOfStream;switch(e){case c.a.Success:case c.a.EndOfDictation:case c.a.NoMatch:t=s.a.EndOfStream;break;case c.a.InitialSilenceTimeout:case c.a.BabbleTimeout:case c.a.Error:default:t=s.a.Error}return t}},{key:"implTranslateCancelErrorCode",value:function(e){var t=a.a.NoError;switch(e){case c.a.Error:t=a.a.ServiceError;break;case c.a.TooManyRequests:t=a.a.TooManyRequests;break;default:t=a.a.NoError}return t}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(18),i=n(19),o=n(87),s=function(){function e(t){Object(r.a)(this,e),this.privDetailedSpeechPhrase=JSON.parse(t),this.privDetailedSpeechPhrase.RecognitionStatus=o.a[this.privDetailedSpeechPhrase.RecognitionStatus]}return Object(i.a)(e,[{key:"RecognitionStatus",get:function(){return this.privDetailedSpeechPhrase.RecognitionStatus}},{key:"NBest",get:function(){return this.privDetailedSpeechPhrase.NBest}},{key:"Duration",get:function(){return this.privDetailedSpeechPhrase.Duration}},{key:"Offset",get:function(){return this.privDetailedSpeechPhrase.Offset}},{key:"Language",get:function(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}},{key:"LanguageDetectionConfidence",get:function(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}}],[{key:"fromJSON",value:function(t){return new e(t)}}]),e}()},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return z}));var r=n(18),i=n(22),o=n(23),s=n(20),a=n.n(s),c=n(19),u=n(30),h=n(34),p=n(45),f=n(204),v=n(149),d=n(190),l=n(197),y=n(205),g=function(){function e(t,n){Object(r.a)(this,e),this.privStatusCode=t,this.privReason=n}return Object(c.a)(e,[{key:"statusCode",get:function(){return this.privStatusCode}},{key:"reason",get:function(){return this.privReason}}]),e}(),m=n(203),S=n(211),b=n(159),w=n(153),k=n(161),O=n.n(k),C=n(162),R=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},P=function(){function e(t,n,i,o,s,a){var c=this;if(Object(r.a)(this,e),this.open=function(){if(c.privConnectionState===f.a.Disconnected)return Promise.reject("Cannot open a connection that is in ".concat(c.privConnectionState," state"));if(c.privConnectionEstablishDeferral)return c.privConnectionEstablishDeferral.promise;c.privConnectionEstablishDeferral=new v.a,c.privCertificateValidatedDeferral=new v.a,c.privConnectionState=f.a.Connecting;try{if("undefined"===typeof WebSocket||e.forceNpmWebSocket){var t={headers:c.privHeaders,perMessageDeflate:c.privEnableCompression};c.privCertificateValidatedDeferral.resolve();var n=new C.a(c.proxyInfo);t.agent=n.GetAgent(),c.privWebsocketClient=new O.a(c.privUri,t)}else c.privCertificateValidatedDeferral.resolve(),c.privWebsocketClient=new WebSocket(c.privUri);c.privWebsocketClient.binaryType="arraybuffer",c.privReceivingMessageQueue=new d.a,c.privDisconnectDeferral=new v.a,c.privSendMessageQueue=new d.a,c.processSendQueue().catch((function(e){l.a.instance.onEvent(new y.a(e))}))}catch(r){return c.privConnectionEstablishDeferral.resolve(new g(500,r)),c.privConnectionEstablishDeferral.promise}return c.onEvent(new m.g(c.privConnectionId,c.privUri)),c.privWebsocketClient.onopen=function(e){c.privCertificateValidatedDeferral.promise.then((function(){c.privConnectionState=f.a.Connected,c.onEvent(new m.d(c.privConnectionId)),c.privConnectionEstablishDeferral.resolve(new g(200,""))}),(function(e){c.privConnectionEstablishDeferral.reject(e)}))},c.privWebsocketClient.onerror=function(e){c.onEvent(new m.b(c.privConnectionId,e.message,e.type)),c.privLastErrorReceived=e.message},c.privWebsocketClient.onclose=function(e){c.privConnectionState===f.a.Connecting?(c.privConnectionState=f.a.Disconnected,c.privConnectionEstablishDeferral.resolve(new g(e.code,e.reason+" "+c.privLastErrorReceived))):(c.privConnectionState=f.a.Disconnected,c.onEvent(new m.a(c.privConnectionId,e.code,e.reason))),c.onClose(e.code,e.reason).catch((function(e){l.a.instance.onEvent(new y.a(e))}))},c.privWebsocketClient.onmessage=function(e){var t=(new Date).toISOString();if(c.privConnectionState===f.a.Connected){var n=new v.a;if(c.privReceivingMessageQueue.enqueueFromPromise(n.promise),e.data instanceof ArrayBuffer){var r=new S.a(b.b.Binary,e.data);c.privMessageFormatter.toConnectionMessage(r).then((function(e){c.onEvent(new m.e(c.privConnectionId,t,e)),n.resolve(e)}),(function(e){n.reject("Invalid binary message format. Error: ".concat(e))}))}else{var i=new S.a(b.b.Text,e.data);c.privMessageFormatter.toConnectionMessage(i).then((function(e){c.onEvent(new m.e(c.privConnectionId,t,e)),n.resolve(e)}),(function(e){n.reject("Invalid text message format. Error: ".concat(e))}))}}},c.privConnectionEstablishDeferral.promise},this.send=function(e){if(c.privConnectionState!==f.a.Connected)return Promise.reject("Cannot send on connection that is in ".concat(f.a[c.privConnectionState]," state"));var t=new v.a,n=new v.a;return c.privSendMessageQueue.enqueueFromPromise(n.promise),c.privMessageFormatter.fromConnectionMessage(e).then((function(r){n.resolve({Message:e,RawWebsocketMessage:r,sendStatusDeferral:t})}),(function(e){n.reject("Error formatting the message. ".concat(e))})),t.promise},this.read=function(){return c.privConnectionState!==f.a.Connected?Promise.reject("Cannot read on connection that is in ".concat(c.privConnectionState," state")):c.privReceivingMessageQueue.dequeue()},this.close=function(e){return c.privWebsocketClient?(c.privConnectionState!==f.a.Disconnected&&c.privWebsocketClient.close(1e3,e||"Normal closure by client"),c.privDisconnectDeferral.promise):Promise.resolve()},this.sendRawMessage=function(e){try{return e?(c.onEvent(new m.f(c.privConnectionId,(new Date).toISOString(),e.Message)),c.isWebsocketOpen?(c.privWebsocketClient.send(e.RawWebsocketMessage.payload),Promise.resolve()):Promise.reject("websocket send error: Websocket not ready "+c.privConnectionId+" "+e.Message.id+" "+(new Error).stack)):Promise.resolve()}catch(t){return Promise.reject("websocket send error: ".concat(t))}},this.onEvent=function(e){c.privConnectionEvents.onEvent(e),l.a.instance.onEvent(e)},!t)throw new u.a("uri");if(!i)throw new u.a("messageFormatter");this.proxyInfo=o,this.privConnectionEvents=new w.a,this.privConnectionId=n,this.privMessageFormatter=i,this.privConnectionState=f.a.None,this.privUri=t,this.privHeaders=s,this.privEnableCompression=a,this.privHeaders[p.a.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}return Object(c.a)(e,[{key:"state",get:function(){return this.privConnectionState}},{key:"events",get:function(){return this.privConnectionEvents}},{key:"onClose",value:function(e,t){return R(this,void 0,void 0,a.a.mark((function n(){var r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="Connection closed. ".concat(e,": ").concat(t),this.privConnectionState=f.a.Disconnected,this.privDisconnectDeferral.resolve(),n.next=5,this.privReceivingMessageQueue.drainAndDispose((function(e){}),r);case 5:return n.next=7,this.privSendMessageQueue.drainAndDispose((function(e){e.sendStatusDeferral.reject(r)}),r);case 7:case"end":return n.stop()}}),n,this)})))}},{key:"processSendQueue",value:function(){return R(this,void 0,void 0,a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.privSendMessageQueue.dequeue(),e.next=4,t;case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.next=10,this.sendRawMessage(n);case 10:n.sendStatusDeferral.resolve(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),n.sendStatusDeferral.reject(e.t0);case 16:e.next=0;break;case 18:case"end":return e.stop()}}),e,this,[[7,13]])})))}},{key:"isWebsocketOpen",get:function(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}]),e}();P.forceNpmWebSocket=!1;var E=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},I=function(){function e(t,n,i,o,s){var a=this,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],p=arguments.length>6?arguments[6]:void 0;if(Object(r.a)(this,e),this.privIsDisposed=!1,this.isDisposed=function(){return a.privIsDisposed},this.state=function(){return a.privConnectionMessageAdapter.state},this.open=function(){return a.privConnectionMessageAdapter.open()},this.send=function(e){return a.privConnectionMessageAdapter.send(e)},this.read=function(){return a.privConnectionMessageAdapter.read()},!t)throw new u.a("uri");if(!o)throw new u.a("messageFormatter");this.privMessageFormatter=o;var f="",v=0;if(n)for(var d in n)if(d){f+=0===v&&-1===t.indexOf("?")?"?":"&";var l=encodeURIComponent(n[d]);f+="".concat(d,"=").concat(l),v++}if(i)for(var y in i)if(y){f+=0===v&&-1===t.indexOf("?")?"?":"&";var g=encodeURIComponent(i[y]);f+="".concat(y,"=").concat(g),v++}this.privUri=t+f,this.privId=p||Object(h.a)(),this.privConnectionMessageAdapter=new P(this.privUri,this.id,this.privMessageFormatter,s,i,c)}return Object(c.a)(e,[{key:"dispose",value:function(){return E(this,void 0,void 0,a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.privIsDisposed=!0,!this.privConnectionMessageAdapter){e.next=4;break}return e.next=4,this.privConnectionMessageAdapter.close();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"id",get:function(){return this.privId}},{key:"events",get:function(){return this.privConnectionMessageAdapter.events}}]),e}(),x=n(198),A=function(){function e(t,n,i,o){Object(r.a)(this,e),this.privProxyHostName=t,this.privProxyPort=n,this.privProxyUserName=i,this.privProxyPassword=o}return Object(c.a)(e,[{key:"HostName",get:function(){return this.privProxyHostName}},{key:"Port",get:function(){return this.privProxyPort}},{key:"UserName",get:function(){return this.privProxyUserName}},{key:"Password",get:function(){return this.privProxyPassword}}],[{key:"fromParameters",value:function(t){return new e(t.getProperty(x.a.SpeechServiceConnection_ProxyHostName),parseInt(t.getProperty(x.a.SpeechServiceConnection_ProxyPort),10),t.getProperty(x.a.SpeechServiceConnection_ProxyUserName),t.getProperty(x.a.SpeechServiceConnection_ProxyPassword))}},{key:"fromRecognizerConfig",value:function(e){return this.fromParameters(e.parameters)}}]),e}(),T=n(25),j=n(208),D=function e(){Object(r.a)(this,e)};D.BotId="botid",D.CustomSpeechDeploymentId="cid",D.CustomVoiceDeploymentId="deploymentId",D.EnableAudioLogging="storeAudio",D.EnableLanguageId="lidEnabled",D.EnableWordLevelTimestamps="wordLevelTimestamps",D.EndSilenceTimeoutMs="endSilenceTimeoutMs",D.Format="format",D.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",D.Language="language",D.Profanity="profanity",D.RequestBotStatusMessages="enableBotMessageStatus",D.StableIntermediateThreshold="stableIntermediateThreshold",D.StableTranslation="stableTranslation",D.TestHooks="testhooks";var M=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,[{key:"setCommonUrlParams",value:function(e,t,n){this.setUrlParameter(x.a.SpeechServiceConnection_EnableAudioLogging,D.EnableAudioLogging,e,t,n),this.setUrlParameter(x.a.SpeechServiceResponse_RequestWordLevelTimestamps,D.EnableWordLevelTimestamps,e,t,n),this.setUrlParameter(x.a.SpeechServiceResponse_ProfanityOption,D.Profanity,e,t,n),this.setUrlParameter(x.a.SpeechServiceConnection_InitialSilenceTimeoutMs,D.InitialSilenceTimeoutMs,e,t,n),this.setUrlParameter(x.a.SpeechServiceConnection_EndSilenceTimeoutMs,D.EndSilenceTimeoutMs,e,t,n),this.setUrlParameter(x.a.SpeechServiceResponse_StablePartialResultThreshold,D.StableIntermediateThreshold,e,t,n);var r=JSON.parse(e.parameters.getProperty(T.ServicePropertiesPropertyName,"{}"));Object.keys(r).forEach((function(e,n,i){t[e]=r[e]}))}},{key:"setUrlParameter",value:function(e,t,n,r,i){var o=n.parameters.getProperty(e,void 0);!o||i&&-1!==i.search(t)||(r[t]=o.toLocaleLowerCase())}}]),e}(),_=n(72),B=n(84),z=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",e.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",e.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",e.create=function(t,n,r){var i=t.parameters.getProperty(x.a.SpeechServiceConnection_Endpoint,void 0),o=t.parameters.getProperty(x.a.SpeechServiceConnection_Region,void 0),s=o&&o.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com",a=t.parameters.getProperty(x.a.SpeechServiceConnection_Host,"wss://"+o+".stt.speech"+s),c={},u=t.parameters.getProperty(x.a.SpeechServiceConnection_EndpointId,void 0),h=t.parameters.getProperty(x.a.SpeechServiceConnection_RecoLanguage,void 0);if(u?i&&-1!==i.search(D.CustomSpeechDeploymentId)||(c[D.CustomSpeechDeploymentId]=u):h&&(i&&-1!==i.search(D.Language)||(c[D.Language]=h)),i&&-1!==i.search(D.Format)||(c[D.Format]=t.parameters.getProperty(T.OutputFormatPropertyName,j.a[j.a.Simple]).toLowerCase()),void 0!==t.autoDetectSourceLanguages&&(c[D.EnableLanguageId]="true"),e.setCommonUrlParams(t,c,i),!i)switch(t.recognitionMode){case _.c.Conversation:i="true"===t.parameters.getProperty(T.ForceDictationPropertyName,"false")?a+e.dictationRelativeUri:a+e.conversationRelativeUri;break;case _.c.Dictation:i=a+e.dictationRelativeUri;break;default:i=a+e.interactiveRelativeUri}var f={};void 0!==n.token&&""!==n.token&&(f[n.headerName]=n.token),f[p.a.ConnectionId]=r,t.parameters.setProperty(x.a.SpeechServiceConnection_Url,i);var v="true"===t.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new I(i,c,f,new B.a,A.fromRecognizerConfig(t),v,r)},e}return n}(M)},function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var r=n(20),i=n.n(r),o=n(18),s=n(19),a=n(22),c=n(23),u=n(202),h=n(198),p=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,s,a,c,u,h,p,f,v){var d;return Object(o.a)(this,n),(d=t.call(this,e,r,i,s,a,c,u,p,f,v)).privSpeakerId=h,d}return Object(s.a)(n,[{key:"speakerId",get:function(){return this.privSpeakerId}}]),n}(function(){function e(t,n,r,i,s,a,c,u,h,p){Object(o.a)(this,e),this.privResultId=t,this.privReason=n,this.privText=r,this.privDuration=i,this.privOffset=s,this.privLanguage=a,this.privLanguageDetectionConfidence=c,this.privErrorDetails=u,this.privJson=h,this.privProperties=p}return Object(s.a)(e,[{key:"resultId",get:function(){return this.privResultId}},{key:"reason",get:function(){return this.privReason}},{key:"text",get:function(){return this.privText}},{key:"duration",get:function(){return this.privDuration}},{key:"offset",get:function(){return this.privOffset}},{key:"language",get:function(){return this.privLanguage}},{key:"languageDetectionConfidence",get:function(){return this.privLanguageDetectionConfidence}},{key:"errorDetails",get:function(){return this.privErrorDetails}},{key:"json",get:function(){return this.privJson}},{key:"properties",get:function(){return this.privProperties}}]),e}()),f=n(201),v=n(207),d=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e,r,i){var s;return Object(o.a)(this,n),(s=t.call(this,r,i)).privResult=e,s}return Object(s.a)(n,[{key:"result",get:function(){return this.privResult}}]),n}(v.a),l=n(208),y=n(200),g=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return n}(function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,s,a){var c;return Object(o.a)(this,n),(c=t.call(this,s,a)).privReason=e,c.privErrorDetails=r,c.privErrorCode=i,c}return Object(s.a)(n,[{key:"reason",get:function(){return this.privReason}},{key:"errorCode",get:function(){return this.privErrorCode}},{key:"errorDetails",get:function(){return this.privErrorDetails}}]),n}(v.a)),m=n(85),S=n(86),b=n(88),w=n(87),k=n(25),O=n(89),C=n(96),R=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},P=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e,r,i,s,a){var c;if(Object(o.a)(this,n),(c=t.call(this,e,r,i,s,a)).privSpeechRecognizer=a,void 0!==s.autoDetectSourceLanguages){var u=s.autoDetectSourceLanguages.split(",");c.privSpeechContext.setSection("languageId",{languages:u,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),c.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}})}return c}return Object(s.a)(n,[{key:"processTypeSpecificMessages",value:function(e){return R(this,void 0,void 0,i.a.mark((function t(){var n,r,o,s,a,c,v,y,g,C,R;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=new u.a).setProperty(h.a.SpeechServiceResponse_JsonResult,e.textBody),o=!1,t.t0=e.path.toLowerCase(),t.next="speech.hypothesis"===t.t0||"speech.fragment"===t.t0?6:"speech.phrase"===t.t0?14:27;break;case 6:if(s=m.a.fromJSON(e.textBody),a=s.Offset+this.privRequestSession.currentTurnAudioOffset,n=new p(this.privRequestSession.requestId,f.a.RecognizingSpeech,s.Text,s.Duration,a,s.Language,s.LanguageDetectionConfidence,void 0,void 0,e.textBody,r),this.privRequestSession.onHypothesis(a),c=new d(n,s.Duration,this.privRequestSession.sessionId),this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,c)}catch(i){}return o=!0,t.abrupt("break",28);case 14:if(v=S.a.fromJSON(e.textBody),y=b.a.implTranslateRecognitionResult(v.RecognitionStatus),this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+v.Offset+v.Duration),f.a.Canceled!==y){t.next=23;break}return g=b.a.implTranslateCancelResult(v.RecognitionStatus),t.next=21,this.cancelRecognitionLocal(g,b.a.implTranslateCancelErrorCode(v.RecognitionStatus),void 0);case 21:t.next=25;break;case 23:if((!this.privRequestSession.isSpeechEnded||y!==f.a.NoMatch||v.RecognitionStatus===w.a.InitialSilenceTimeout)&&(this.privRecognizerConfig.parameters.getProperty(k.OutputFormatPropertyName)===l.a[l.a.Simple]?n=new p(this.privRequestSession.requestId,y,v.DisplayText,v.Duration,v.Offset+this.privRequestSession.currentTurnAudioOffset,v.Language,v.LanguageDetectionConfidence,void 0,void 0,e.textBody,r):(C=O.a.fromJSON(e.textBody),n=new p(this.privRequestSession.requestId,y,C.RecognitionStatus===w.a.Success?C.NBest[0].Display:void 0,C.Duration,C.Offset+this.privRequestSession.currentTurnAudioOffset,C.Language,C.LanguageDetectionConfidence,void 0,void 0,e.textBody,r)),R=new d(n,n.offset,this.privRequestSession.sessionId),this.privSpeechRecognizer.recognized))try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,R)}catch(i){}if(this.privSuccessCallback){try{this.privSuccessCallback(n)}catch(P){this.privErrorCallback&&this.privErrorCallback(P)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}case 25:return o=!0,t.abrupt("break",28);case 27:return t.abrupt("break",28);case 28:return t.abrupt("return",o);case 29:case"end":return t.stop()}}),t,this)})))}},{key:"cancelRecognition",value:function(e,t,n,r,i){var o=new u.a;if(o.setProperty(k.CancellationErrorCodePropertyName,y.a[r]),this.privSpeechRecognizer.canceled){var s=new g(n,i,r,void 0,e);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,s)}catch(c){}}if(this.privSuccessCallback){var a=new p(t,f.a.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,i,void 0,o);try{this.privSuccessCallback(a),this.privSuccessCallback=void 0}catch(h){}}}}]),n}(C.a)},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return A}));var r=n(20),i=n.n(r),o=n(18),s=n(19),a=n(26),c=function(){function e(t,n){var r=this;Object(o.a)(this,e),this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.id=function(){return r.privAudioNode.id()},this.privAudioNode=t,this.privBytesPerSecond=n}return Object(s.a)(e,[{key:"read",value:function(){var e=this;if(this.privReplay&&0!==this.privBuffers.length){var t=this.privReplayOffset-this.privBufferStartOffset,n=Math.round(t*this.privBytesPerSecond*1e-7);0!==n%2&&n++;for(var r=0;r<this.privBuffers.length&&n>=this.privBuffers[r].chunk.buffer.byteLength;)n-=this.privBuffers[r++].chunk.buffer.byteLength;if(r<this.privBuffers.length){var i=this.privBuffers[r].chunk.buffer.slice(n);return this.privReplayOffset+=i.byteLength/this.privBytesPerSecond*1e7,r===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:i,isEnd:!1,timeReceived:this.privBuffers[r].chunk.timeReceived})}}return this.privAudioNode.read().then((function(t){return t&&t.buffer&&(e.privBuffers.push(new u(t,e.privBufferSerial++,e.privBufferedBytes)),e.privBufferedBytes+=t.buffer.byteLength),t}))}},{key:"detach",value:function(){return this.privBuffers=void 0,this.privAudioNode.detach()}},{key:"replay",value:function(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}},{key:"shrinkBuffers",value:function(e){if(void 0!==this.privBuffers&&0!==this.privBuffers.length){this.privLastShrinkOffset=e;for(var t=e-this.privBufferStartOffset,n=Math.round(t*this.privBytesPerSecond*1e-7),r=0;r<this.privBuffers.length&&n>=this.privBuffers[r].chunk.buffer.byteLength;)n-=this.privBuffers[r++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-n/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(r)}}},{key:"findTimeAtOffset",value:function(e){if(e<this.privBufferStartOffset||void 0===this.privBuffers)return 0;var t,n=Object(a.a)(this.privBuffers);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.byteOffset/this.privBytesPerSecond*1e7,o=i+r.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=i&&e<=o)return r.chunk.timeReceived}}catch(s){n.e(s)}finally{n.f()}return 0}}]),e}(),u=function e(t,n,r){Object(o.a)(this,e),this.chunk=t,this.serial=n,this.byteOffset=r},h=n(159),p=n(30),f=n(153),v=function e(){Object(o.a)(this,e)};v.workerTimers=null,v.clearTimeout=function(e){return v.timers().clearTimeout(e)},v.setTimeout=function(e,t){return v.timers().setTimeout(e,t)},v.load=function(e){var t=new Map([[0,function(){}]]),n=new Map,r=new Worker(e);r.addEventListener("message",(function(e){var r=e.data;if(v.isCallNotification(r)){var i=r.params.timerId,o=t.get(i);if("number"===typeof o){var s=n.get(o);if(void 0===s||s!==i)throw new Error("The timer is in an undefined state.")}else{if("undefined"===typeof o)throw new Error("The timer is in an undefined state.");o(),t.delete(i)}}else{if(!v.isClearResponse(r)){var a=r.error.message;throw new Error(a)}var c=r.id,u=n.get(c);if(void 0===u)throw new Error("The timer is in an undefined state.");n.delete(c),t.delete(u)}}));return{clearTimeout:function(e){var i=Math.random();n.set(i,e),t.set(e,i),r.postMessage({id:i,method:"clear",params:{timerId:e}})},setTimeout:function(e,n){var i=Math.random();return t.set(i,e),r.postMessage({id:null,method:"set",params:{delay:n,now:performance.now(),timerId:i}}),i}}},v.loadWorkerTimers=function(){return function(){if(null!==v.workerTimers)return v.workerTimers;var e=new Blob(['!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'],{type:"application/javascript; charset=utf-8"}),t=URL.createObjectURL(e);return(v.workerTimers=v.load(t)).setTimeout((function(){return URL.revokeObjectURL(t)}),0),v.workerTimers}},v.timers=v.loadWorkerTimers(),v.isCallNotification=function(e){return void 0!==e.method&&"call"===e.method},v.isClearResponse=function(e){return null===e.error&&"number"===typeof e.id};var d=n(203),l=n(204),y=n(34),g=n(199),m=n(200),S=n(198),b=n(206),w=n(207),k=n(100),O=n(79),C=n(80),R=n(77),P=n(72),E=n(81),I=n(75),x=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},A=function(){function e(t,n,r,s,a){var c=this;if(Object(o.a)(this,e),this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.recognizeOverride=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendSpeechContext=function(e){var t=c.speechContext.toJSON();if(t)return e.send(new I.a(h.b.Text,"speech.context",c.privRequestSession.requestId,"application/json",t))},this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.sendSpeechServiceConfig=function(t,n,r){if(!0!==e.telemetryDataEnabled){var i={context:{system:JSON.parse(r).context.system}};r=JSON.stringify(i)}if(r)return t.send(new I.a(h.b.Text,"speech.config",n.requestId,"application/json",r))},!t)throw new p.a("authentication");if(!n)throw new p.a("connectionFactory");if(!r)throw new p.a("audioSource");if(!s)throw new p.a("recognizerConfig");this.privMustReportEndOfStream=!1,this.privAuthentication=t,this.privConnectionFactory=n,this.privAudioSource=r,this.privRecognizerConfig=s,this.privIsDisposed=!1,this.privRecognizer=a,this.privRequestSession=new k.a(this.privAudioSource.id()),this.privConnectionEvents=new f.a,this.privServiceEvents=new f.a,this.privDynamicGrammar=new O.a,this.privSpeechContext=new C.a(this.privDynamicGrammar),this.privAgentConfig=new R.a,"undefined"!==typeof Blob&&"undefined"!==typeof Worker&&(this.privSetTimeout=v.setTimeout),this.connectionEvents.attach((function(e){return x(c,void 0,void 0,i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("ConnectionClosedEvent"!==e.name){t.next=5;break}if(1e3===(n=e).statusCode){t.next=5;break}return t.next=5,this.cancelRecognitionLocal(g.a.Error,1007===n.statusCode?m.a.BadRequestParameters:m.a.ConnectionFailure,n.reason+" websocket error code: "+n.statusCode);case 5:case"end":return t.stop()}}),t,this)})))}))}return Object(s.a)(e,[{key:"audioSource",get:function(){return this.privAudioSource}},{key:"speechContext",get:function(){return this.privSpeechContext}},{key:"dynamicGrammar",get:function(){return this.privDynamicGrammar}},{key:"agentConfig",get:function(){return this.privAgentConfig}},{key:"conversationTranslatorToken",set:function(e){this.privRecognizerConfig.parameters.setProperty(S.a.ConversationTranslator_Token,e)}},{key:"authentication",set:function(e){this.privAuthentication=this.authentication}},{key:"isDisposed",value:function(){return this.privIsDisposed}},{key:"dispose",value:function(e){return x(this,void 0,void 0,i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.privIsDisposed=!0,!this.privConnectionConfigurationPromise){t.next=13;break}return t.prev=2,t.next=5,this.privConnectionConfigurationPromise;case 5:return n=t.sent,t.next=8,n.dispose(e);case 8:t.next=13;break;case 10:return t.prev=10,t.t0=t.catch(2),t.abrupt("return");case 13:case"end":return t.stop()}}),t,this,[[2,10]])})))}},{key:"connectionEvents",get:function(){return this.privConnectionEvents}},{key:"serviceEvents",get:function(){return this.privServiceEvents}},{key:"recognitionMode",get:function(){return this.privRecognizerConfig.recognitionMode}},{key:"recognize",value:function(e,t,n){return x(this,void 0,void 0,i.a.mark((function r(){var o,s,a,u,h,p,f=this;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===this.recognizeOverride){r.next=2;break}return r.abrupt("return",this.recognizeOverride(e,t,n));case 2:return this.privConnectionConfigurationPromise=null,this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=n,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events),o=this.connectImpl(),r.prev=9,r.next=12,this.audioSource.attach(this.privRequestSession.audioNodeId);case 12:return a=r.sent,r.next=15,this.audioSource.format;case 15:return u=r.sent,r.next=18,this.audioSource.deviceInfo;case 18:return h=r.sent,this.privIsLiveAudio=h.type&&h.type===P.g.Microphones,s=new c(a,u.avgBytesPerSec),r.next=23,this.privRequestSession.onAudioSourceAttachCompleted(s,!1);case 23:this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:h},r.next=31;break;case 26:return r.prev=26,r.t0=r.catch(9),r.next=30,this.privRequestSession.onStopRecognizing();case 30:throw r.t0;case 31:return r.prev=31,r.next=34,o;case 34:r.next=41;break;case 36:return r.prev=36,r.t1=r.catch(31),r.next=40,this.cancelRecognitionLocal(g.a.Error,m.a.ConnectionFailure,r.t1);case 40:return r.abrupt("return");case 41:return p=new b.a(this.privRequestSession.sessionId),this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,p),this.receiveMessage(),this.sendAudio(s).catch((function(e){return x(f,void 0,void 0,i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cancelRecognitionLocal(g.a.Error,m.a.RuntimeError,e);case 2:case"end":return t.stop()}}),t,this)})))})),r.abrupt("return");case 47:case"end":return r.stop()}}),r,this,[[9,26],[31,36]])})))}},{key:"stopRecognizing",value:function(){return x(this,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.privRequestSession.isRecognizing){e.next=11;break}return e.next=3,this.audioSource.turnOff();case 3:return e.next=5,this.sendFinalAudio();case 5:return e.next=7,this.privRequestSession.onStopRecognizing();case 7:return e.next=9,this.privRequestSession.turnCompletionPromise;case 9:return e.next=11,this.privRequestSession.dispose();case 11:return e.abrupt("return");case 12:case"end":return e.stop()}}),e,this)})))}},{key:"connect",value:function(){return x(this,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connectImpl();case 2:return e.abrupt("return",Promise.resolve());case 3:case"end":return e.stop()}}),e,this)})))}},{key:"connectAsync",value:function(e,t){this.connectImpl().then((function(n){try{e&&e()}catch(r){t&&t(r)}}),(function(e){try{t&&t(e)}catch(n){}}))}},{key:"disconnect",value:function(){return x(this,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cancelRecognitionLocal(g.a.Error,m.a.NoError,"Disconnecting");case 2:if(void 0===this.disconnectOverride){e.next=5;break}return e.next=5,this.disconnectOverride();case 5:return e.prev=5,e.next=8,this.privConnectionPromise;case 8:return e.next=10,e.sent.dispose();case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(5);case 14:this.privConnectionPromise=null;case 15:case"end":return e.stop()}}),e,this,[[5,12]])})))}},{key:"sendMessage",value:function(e){}},{key:"sendNetworkMessage",value:function(e,t){return x(this,void 0,void 0,i.a.mark((function n(){var r,o,s;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="string"===typeof t?h.b.Text:h.b.Binary,o="string"===typeof t?"application/json":"",n.next=4,this.fetchConnection();case 4:return s=n.sent,n.abrupt("return",s.send(new I.a(r,e,this.privRequestSession.requestId,o,t)));case 6:case"end":return n.stop()}}),n,this)})))}},{key:"activityTemplate",get:function(){return this.privActivityTemplate},set:function(e){this.privActivityTemplate=e}},{key:"sendTelemetryData",value:function(){return x(this,void 0,void 0,i.a.mark((function t(){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.privRequestSession.getTelemetry(),!0===e.telemetryDataEnabled&&!this.privIsDisposed&&null!==n){t.next=3;break}return t.abrupt("return");case 3:if(e.telemetryData)try{e.telemetryData(n)}catch(i){}return t.next=6,this.fetchConnection();case 6:return r=t.sent,t.next=9,r.send(new I.a(h.b.Text,"telemetry",this.privRequestSession.requestId,"application/json",n));case 9:case"end":return t.stop()}}),t,this)})))}},{key:"cancelRecognitionLocal",value:function(e,t,n){return x(this,void 0,void 0,i.a.mark((function r(){return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.privRequestSession.isRecognizing){r.next=4;break}return r.next=3,this.privRequestSession.onStopRecognizing();case 3:this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,t,n);case 4:case"end":return r.stop()}}),r,this)})))}},{key:"receiveMessage",value:function(){return x(this,void 0,void 0,i.a.mark((function e(){var t,n,r,o,s,a,c,u,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.privIsDisposed){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.fetchConnection();case 5:return t=e.sent,e.next=8,t.read();case 8:if(n=e.sent,void 0===this.receiveMessageOverride){e.next=11;break}return e.abrupt("return",this.receiveMessageOverride());case 11:if(n){e.next=17;break}if(this.privRequestSession.isRecognizing){e.next=16;break}return e.abrupt("return");case 16:return e.abrupt("return",this.receiveMessage());case 17:if(this.privServiceHasSentMessage=!0,(r=I.a.fromConnectionMessage(n)).requestId.toLowerCase()!==this.privRequestSession.requestId.toLowerCase()){e.next=60;break}e.t0=r.path.toLowerCase(),e.next="turn.start"===e.t0?23:"speech.startdetected"===e.t0?26:"speech.enddetected"===e.t0?30:"turn.end"===e.t0?36:56;break;case 23:return this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse(),e.abrupt("break",60);case 26:return o=E.a.fromJSON(r.textBody),s=new w.a(o.Offset,this.privRequestSession.sessionId),this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,s),e.abrupt("break",60);case 30:return a=r.textBody.length>0?r.textBody:"{ Offset: 0 }",c=E.a.fromJSON(a),this.privRecognizerConfig.isContinuousRecognition&&this.privRequestSession.onServiceRecognized(c.Offset+this.privRequestSession.currentTurnAudioOffset),u=new w.a(c.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,u),e.abrupt("break",60);case 36:return e.next=38,this.sendTelemetryData();case 38:if(!this.privRequestSession.isSpeechEnded||!this.privMustReportEndOfStream){e.next=42;break}return this.privMustReportEndOfStream=!1,e.next=42,this.cancelRecognitionLocal(g.a.EndOfStream,m.a.NoError,void 0);case 42:return h=new b.a(this.privRequestSession.sessionId),e.next=45,this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition);case 45:if(this.privRecognizerConfig.isContinuousRecognition&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing){e.next=50;break}return this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,h),e.abrupt("return");case 50:return e.next=52,this.fetchConnection();case 52:return t=e.sent,e.next=55,this.sendPrePayloadJSON(t);case 55:return e.abrupt("break",60);case 56:return e.next=58,this.processTypeSpecificMessages(r);case 58:if(e.sent){e.next=60;break}this.privServiceEvents&&this.serviceEvents.onEvent(new d.h(r.path.toLowerCase(),r.textBody));case 60:return e.abrupt("return",this.receiveMessage());case 63:return e.prev=63,e.t1=e.catch(0),e.abrupt("return",null);case 66:case"end":return e.stop()}}),e,this,[[0,63]])})))}},{key:"sendPrePayloadJSON",value:function(e){return x(this,void 0,void 0,i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===this.sendPrePayloadJSONOverride){t.next=2;break}return t.abrupt("return",this.sendPrePayloadJSONOverride(e));case 2:return t.next=4,this.sendSpeechContext(e);case 4:return t.next=6,this.sendWaveHeader(e);case 6:return t.abrupt("return");case 7:case"end":return t.stop()}}),t,this)})))}},{key:"sendWaveHeader",value:function(e){return x(this,void 0,void 0,i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.audioSource.format;case 2:return n=t.sent,t.abrupt("return",e.send(new I.a(h.b.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",n.header)));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"connectImpl",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.privConnectionPromise)return this.privConnectionPromise.then((function(t){return t.state()===l.a.Disconnected?(e.privConnectionId=null,e.privConnectionPromise=null,e.privServiceHasSentMessage=!1,e.connectImpl()):e.privConnectionPromise}),(function(t){return e.privConnectionId=null,e.privConnectionPromise=null,e.privServiceHasSentMessage=!1,e.connectImpl()}));this.privAuthFetchEventId=Object(y.a)();var n=this.privRecognizerConfig.parameters.getProperty(S.a.Speech_SessionId,void 0);this.privConnectionId=void 0!==n?n:Object(y.a)(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);var r=t?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=r.then((function(n){return x(e,void 0,void 0,i.a.mark((function e(){var r,o,s=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.privRequestSession.onAuthCompleted(!1);case 2:return r=this.privConnectionFactory.create(this.privRecognizerConfig,n,this.privConnectionId),this.privRequestSession.listenForServiceTelemetry(r.events),r.events.attach((function(e){s.connectionEvents.onEvent(e)})),e.next=7,r.open();case 7:if(200!==(o=e.sent).statusCode){e.next=14;break}return e.next=11,this.privRequestSession.onConnectionEstablishCompleted(o.statusCode);case 11:return e.abrupt("return",Promise.resolve(r));case 14:if(403!==o.statusCode||t){e.next=18;break}return e.abrupt("return",this.connectImpl(!0));case 18:return e.next=20,this.privRequestSession.onConnectionEstablishCompleted(o.statusCode,o.reason);case 20:return e.abrupt("return",Promise.reject("Unable to contact server. StatusCode: ".concat(o.statusCode,", ").concat(this.privRecognizerConfig.parameters.getProperty(S.a.SpeechServiceConnection_Endpoint)," Reason: ").concat(o.reason)));case 21:case"end":return e.stop()}}),e,this)})))}),(function(t){return x(e,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.privRequestSession.onAuthCompleted(!0,t);case 2:throw new Error(t);case 3:case"end":return e.stop()}}),e,this)})))})),this.privConnectionPromise.catch((function(){})),void 0!==this.postConnectImplOverride?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise}},{key:"fetchConnection",value:function(){return x(this,void 0,void 0,i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.privConnectionConfigurationPromise){e.next=2;break}return e.abrupt("return",this.privConnectionConfigurationPromise.then((function(e){return e.state()===l.a.Disconnected?(t.privConnectionId=null,t.privConnectionConfigurationPromise=null,t.privServiceHasSentMessage=!1,t.fetchConnection()):t.privConnectionConfigurationPromise}),(function(e){return t.privConnectionId=null,t.privConnectionConfigurationPromise=null,t.privServiceHasSentMessage=!1,t.fetchConnection()})));case 2:return this.privConnectionConfigurationPromise=this.configureConnection(),e.next=5,this.privConnectionConfigurationPromise;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"sendAudio",value:function(e){return x(this,void 0,void 0,i.a.mark((function t(){var n,r,o,s,a,c,u=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.audioSource.format;case 2:return n=t.sent,r=Date.now(),o=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),s=n.avgBytesPerSec/1e3*parseInt(o,10),a=this.privRequestSession.recogNumber,c=function t(){return x(u,void 0,void 0,i.a.mark((function o(){var c,u,p,f,v=this;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.privIsDisposed||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing||this.privRequestSession.recogNumber!==a){i.next=21;break}return i.next=3,this.fetchConnection();case 3:return c=i.sent,i.next=6,e.read();case 6:if(u=i.sent,!this.privRequestSession.isSpeechEnded){i.next=9;break}return i.abrupt("return");case 9:if(!u||u.isEnd?(p=null,f=0):(p=u.buffer,this.privRequestSession.onAudioSent(p.byteLength),f=s>=this.privRequestSession.bytesSent?0:Math.max(0,r-Date.now())),0===f){i.next=13;break}return i.next=13,this.delay(f);case 13:if(null!==p&&(r=Date.now()+1e3*p.byteLength/(2*n.avgBytesPerSec)),this.privIsDisposed||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing||this.privRequestSession.recogNumber!==a){i.next=21;break}if(c.send(new I.a(h.b.Binary,"audio",this.privRequestSession.requestId,null,p)).catch((function(){v.privRequestSession.onServiceTurnEndResponse(v.privRecognizerConfig.isContinuousRecognition).catch((function(){}))})),null===u||void 0===u?void 0:u.isEnd){i.next=20;break}return i.abrupt("return",t());case 20:this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();case 21:case"end":return i.stop()}}),o,this)})))},t.abrupt("return",c());case 9:case"end":return t.stop()}}),t,this)})))}},{key:"delay",value:function(e){var t=this;return new Promise((function(n,r){t.privSetTimeout(n,e)}))}},{key:"writeBufferToConsole",value:function(e){var t="Buffer Size: ";if(null===e)t+="null";else{var n=new Uint8Array(e);t+=e.byteLength+"\r\n";for(var r=0;r<e.byteLength;r++)t+=n[r].toString(16).padStart(2,"0")+" "}console.info(t)}},{key:"sendFinalAudio",value:function(){return x(this,void 0,void 0,i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchConnection();case 2:return t=e.sent,e.next=5,t.send(new I.a(h.b.Binary,"audio",this.privRequestSession.requestId,null,null));case 5:return e.abrupt("return");case 6:case"end":return e.stop()}}),e,this)})))}},{key:"configureConnection",value:function(){return x(this,void 0,void 0,i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connectImpl();case 2:if(t=e.sent,void 0===this.configConnectionOverride){e.next=5;break}return e.abrupt("return",this.configConnectionOverride(t));case 5:return e.next=7,this.sendSpeechServiceConfig(t,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize());case 7:return e.next=9,this.sendPrePayloadJSON(t);case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,this)})))}}]),e}();A.telemetryDataEnabled=!0},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(38);function i(e,t,n){return(i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.a)(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(20),i=n.n(r),o=n(18),s=n(19),a=n(149),c=n(197),u=n(34),h=n(56),p=n(59),f=n(22),v=n(23),d=n(55),l=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e,r){var i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.a.Info;return Object(o.a)(this,n),(i=t.call(this,e,s)).privRequestId=r,i}return Object(s.a)(n,[{key:"requestId",get:function(){return this.privRequestId}}]),n}(d.b),y=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e,r,i){var s;return Object(o.a)(this,n),(s=t.call(this,"SynthesisTriggeredEvent",e)).privSessionAudioDestinationId=r,s.privTurnAudioDestinationId=i,s}return Object(s.a)(n,[{key:"audioSessionDestinationId",get:function(){return this.privSessionAudioDestinationId}},{key:"audioTurnDestinationId",get:function(){return this.privTurnAudioDestinationId}}]),n}(l),g=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e,r){var i;return Object(o.a)(this,n),(i=t.call(this,"ConnectingToSynthesisServiceEvent",e)).privAuthFetchEventId=r,i}return Object(s.a)(n,[{key:"authFetchEventId",get:function(){return this.privAuthFetchEventId}}]),n}(l),m=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e,r){var i;return Object(o.a)(this,n),(i=t.call(this,"SynthesisStartedEvent",e)).privAuthFetchEventId=r,i}return Object(s.a)(n,[{key:"authFetchEventId",get:function(){return this.privAuthFetchEventId}}]),n}(l),S=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},b=function(){function e(){var t=this;Object(o.a)(this,e),this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.onPreConnectionStart=function(e,n){t.privAuthFetchEventId=e,t.onEvent(new g(t.privRequestId,t.privAuthFetchEventId))},this.onAuthCompleted=function(e,n){e&&t.onComplete()},this.onConnectionEstablishCompleted=function(e,n){if(200===e)return t.onEvent(new m(t.requestId,t.privAuthFetchEventId)),void(t.privBytesReceived=0);403===e&&t.onComplete()},this.onServiceResponseMessage=function(e){var n=JSON.parse(e);t.streamId=n.audio.streamId},this.onServiceTurnEndResponse=function(){t.privInTurn=!1,t.privTurnDeferral.resolve(),t.onComplete()},this.onServiceTurnStartResponse=function(){t.privTurnDeferral&&t.privInTurn&&t.privTurnDeferral.reject("Another turn started before current completed."),t.privInTurn=!0,t.privTurnDeferral=new a.a},this.dispose=function(e){t.privIsDisposed||(t.privIsDisposed=!0)},this.onEvent=function(e){c.a.instance.onEvent(e)},this.onComplete=function(){t.privIsSynthesizing&&(t.privIsSynthesizing=!1,t.privIsSynthesisEnded=!0,t.privAudioOutputStream.close(),t.privInTurn=!1,void 0!==t.privTurnAudioDestination&&(t.privTurnAudioDestination.close(),t.privTurnAudioDestination=void 0))},this.privRequestId=Object(u.a)(),this.privTurnDeferral=new a.a,this.privTurnDeferral.resolve()}return Object(s.a)(e,[{key:"requestId",get:function(){return this.privRequestId}},{key:"streamId",get:function(){return this.privStreamId},set:function(e){this.privStreamId=e}},{key:"audioOutputFormat",get:function(){return this.privAudioOutputFormat},set:function(e){this.privAudioOutputFormat=e}},{key:"turnCompletionPromise",get:function(){return this.privTurnDeferral.promise}},{key:"isSynthesisEnded",get:function(){return this.privIsSynthesisEnded}},{key:"isSynthesizing",get:function(){return this.privIsSynthesizing}},{key:"currentTextOffset",get:function(){return this.privTextOffset}},{key:"bytesReceived",get:function(){return this.privBytesReceived}},{key:"getAllReceivedAudio",value:function(){return S(this,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.privReceivedAudio){e.next=2;break}return e.abrupt("return",Promise.resolve(this.privReceivedAudio));case 2:if(this.privIsSynthesisEnded){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,this.readAllAudioFromStream();case 6:return e.abrupt("return",Promise.resolve(this.privReceivedAudio));case 7:case"end":return e.stop()}}),e,this)})))}},{key:"getAllReceivedAudioWithHeader",value:function(){return S(this,void 0,void 0,i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.privReceivedAudioWithHeader){e.next=2;break}return e.abrupt("return",this.privReceivedAudioWithHeader);case 2:if(this.privIsSynthesisEnded){e.next=4;break}return e.abrupt("return",null);case 4:if(!this.audioOutputFormat.hasHeader){e.next=12;break}return e.next=7,this.getAllReceivedAudio();case 7:return t=e.sent,this.privReceivedAudioWithHeader=p.a.addHeader(t,this.audioOutputFormat),e.abrupt("return",this.privReceivedAudioWithHeader);case 12:return e.abrupt("return",this.getAllReceivedAudio());case 13:case"end":return e.stop()}}),e,this)})))}},{key:"startNewSynthesis",value:function(e,t,n,r){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=t,this.privIsSSML=n,this.privAudioOutputStream=new h.b,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privPartialVisemeAnimation="",void 0!==r&&(this.privTurnAudioDestination=r,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new y(this.requestId,void 0,void 0===r?void 0:r.id()))}},{key:"onAudioChunkReceived",value:function(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(e))}},{key:"onWordBoundaryEvent",value:function(e){this.updateTextOffset(e)}},{key:"onVisemeMetadataReceived",value:function(e){void 0!==e.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)}},{key:"onStopSynthesizing",value:function(){this.onComplete()}},{key:"getAndClearVisemeAnimation",value:function(){var e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e}},{key:"updateTextOffset",value:function(e){this.privTextOffset>=0&&(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length),this.privIsSSML&&this.privRawText.indexOf("<",this.privTextOffset+1)>this.privRawText.indexOf(">",this.privTextOffset+1)&&this.updateTextOffset(e))}},{key:"readAllAudioFromStream",value:function(){return S(this,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.privIsSynthesisEnded){e.next=10;break}return this.privReceivedAudio=new ArrayBuffer(this.bytesReceived),e.prev=2,e.next=5,this.privAudioOutputStream.read(this.privReceivedAudio);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.privReceivedAudio=new ArrayBuffer(0);case 10:case"end":return e.stop()}}),e,this,[[2,7]])})))}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(26),i=n(20),o=n.n(i),s=n(18),a=n(19),c=n(149),u=n(197),h=n(34),p=n(46),f=n(194),v=n(203),d=function(){function e(t,n,r){var i=this;Object(s.a)(this,e),this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.onEvent=function(e){i.privIsDisposed||(e instanceof p.d&&e.requestId===i.privRequestId&&(i.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof f.f&&e.audioSourceId===i.privAudioSourceId&&e.audioNodeId===i.privAudioNodeId&&(i.privMicStartTime=e.eventTime),e instanceof f.e&&e.audioSourceId===i.privAudioSourceId&&e.audioNodeId===i.privAudioNodeId&&(i.privMicStartTime=e.eventTime),e instanceof f.a&&e.audioSourceId===i.privAudioSourceId&&(i.privMicMetric||(i.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:i.privMicStartTime})),e instanceof f.h&&e.audioSourceId===i.privAudioSourceId&&e.audioNodeId===i.privAudioNodeId&&(i.privMicMetric||(i.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:i.privMicStartTime})),e instanceof f.g&&e.audioSourceId===i.privAudioSourceId&&e.audioNodeId===i.privAudioNodeId&&(i.privMicMetric||(i.privMicMetric={End:e.eventTime,Name:"Microphone",Start:i.privMicStartTime})),e instanceof p.a&&e.requestId===i.privRequestId&&(i.privConnectionId=e.sessionId),e instanceof v.g&&e.connectionId===i.privConnectionId&&(i.privConnectionStartTime=e.eventTime),e instanceof v.d&&e.connectionId===i.privConnectionId&&(i.privConnectionEstablishMetric||(i.privConnectionEstablishMetric={End:e.eventTime,Id:i.privConnectionId,Name:"Connection",Start:i.privConnectionStartTime})),e instanceof v.c&&e.connectionId===i.privConnectionId&&(i.privConnectionEstablishMetric||(i.privConnectionEstablishMetric={End:e.eventTime,Error:i.getConnectionError(e.statusCode),Id:i.privConnectionId,Name:"Connection",Start:i.privConnectionStartTime})),e instanceof v.e&&e.connectionId===i.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path&&(i.privReceivedMessages[e.message.headers.path]||(i.privReceivedMessages[e.message.headers.path]=new Array),i.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)))},this.getTelemetry=function(){var e=new Array;i.privListeningTriggerMetric&&e.push(i.privListeningTriggerMetric),i.privMicMetric&&e.push(i.privMicMetric),i.privConnectionEstablishMetric&&e.push(i.privConnectionEstablishMetric),i.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:i.privPhraseLatencies}),i.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:i.privHypothesisLatencies});var t={Metrics:e,ReceivedMessages:i.privReceivedMessages},n=JSON.stringify(t);return i.privReceivedMessages={},i.privListeningTriggerMetric=null,i.privMicMetric=null,i.privConnectionEstablishMetric=null,i.privPhraseLatencies=[],i.privHypothesisLatencies=[],n},this.dispose=function(){i.privIsDisposed=!0},this.getConnectionError=function(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}},this.privRequestId=t,this.privAudioSourceId=n,this.privAudioNodeId=r,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}return Object(a.a)(e,[{key:"phraseReceived",value:function(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}},{key:"hypothesisReceived",value:function(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}},{key:"hasTelemetry",get:function(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length}}]),e}(),l=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},y=function(){function e(t){var n=this;Object(s.a)(this,e),this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.onPreConnectionStart=function(e,t){n.privAuthFetchEventId=e,n.privSessionId=t,n.onEvent(new p.a(n.privRequestId,n.privAuthFetchEventId,n.privSessionId))},this.onServiceTurnStartResponse=function(){n.privTurnDeferral&&n.privInTurn&&n.privTurnDeferral.reject("Another turn started before current completed."),n.privInTurn=!0,n.privTurnDeferral=new c.a},this.getTelemetry=function(){return n.privServiceTelemetryListener.hasTelemetry?n.privServiceTelemetryListener.getTelemetry():null},this.onEvent=function(e){n.privServiceTelemetryListener&&n.privServiceTelemetryListener.onEvent(e),u.a.instance.onEvent(e)},this.privAudioSourceId=t,this.privRequestId=Object(h.a)(),this.privAudioNodeId=Object(h.a)(),this.privTurnDeferral=new c.a,this.privTurnDeferral.resolve()}return Object(a.a)(e,[{key:"sessionId",get:function(){return this.privSessionId}},{key:"requestId",get:function(){return this.privRequestId}},{key:"audioNodeId",get:function(){return this.privAudioNodeId}},{key:"turnCompletionPromise",get:function(){return this.privTurnDeferral.promise}},{key:"isSpeechEnded",get:function(){return this.privIsSpeechEnded}},{key:"isRecognizing",get:function(){return this.privIsRecognizing}},{key:"currentTurnAudioOffset",get:function(){return this.privTurnStartAudioOffset}},{key:"recogNumber",get:function(){return this.privRecogNumber}},{key:"bytesSent",get:function(){return this.privBytesSent}},{key:"listenForServiceTelemetry",value:function(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}},{key:"startNewRecognition",value:function(){this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRequestId=Object(h.a)(),this.privRecogNumber++,this.privServiceTelemetryListener=new d(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new p.d(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}},{key:"onAudioSourceAttachCompleted",value:function(e,t,n){return l(this,void 0,void 0,o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.privAudioNode=e,this.privIsAudioNodeDetached=!1,!t){n.next=7;break}return n.next=5,this.onComplete();case 5:n.next=8;break;case 7:this.onEvent(new p.b(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId));case 8:case"end":return n.stop()}}),n,this)})))}},{key:"onAuthCompleted",value:function(e,t){return l(this,void 0,void 0,o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,this.onComplete();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"onConnectionEstablishCompleted",value:function(e,t){return l(this,void 0,void 0,o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(200!==e){t.next=8;break}return this.onEvent(new p.c(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0,t.abrupt("return");case 8:if(403!==e){t.next=11;break}return t.next=11,this.onComplete();case 11:case"end":return t.stop()}}),t,this)})))}},{key:"onServiceTurnEndResponse",value:function(e){return l(this,void 0,void 0,o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.privTurnDeferral.resolve(),e&&!this.isSpeechEnded){t.next=7;break}return t.next=4,this.onComplete();case 4:this.privInTurn=!1,t.next=10;break;case 7:this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privRequestId=Object(h.a)(),this.privAudioNode.replay();case 10:case"end":return t.stop()}}),t,this)})))}},{key:"onHypothesis",value:function(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}},{key:"onPhraseRecognized",value:function(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}},{key:"onServiceRecognized",value:function(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e)}},{key:"onAudioSent",value:function(e){this.privBytesSent+=e}},{key:"dispose",value:function(e){return l(this,void 0,void 0,o.a.mark((function e(){var t,n,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.privIsDisposed){e.next=21;break}this.privIsDisposed=!0,t=Object(r.a)(this.privDetachables),e.prev=3,t.s();case 5:if((n=t.n()).done){e.next=11;break}return i=n.value,e.next=9,i.detach();case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1;case 21:case"end":return e.stop()}}),e,this,[[3,13,16,19]])})))}},{key:"onStopRecognizing",value:function(){return l(this,void 0,void 0,o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onComplete();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"onSpeechEnded",value:function(){this.privIsSpeechEnded=!0}},{key:"onComplete",value:function(){return l(this,void 0,void 0,o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.privIsRecognizing){e.next=4;break}return this.privIsRecognizing=!1,e.next=4,this.detachAudioNode();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"detachAudioNode",value:function(){return l(this,void 0,void 0,o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.privIsAudioNodeDetached){e.next=5;break}if(this.privIsAudioNodeDetached=!0,!this.privAudioNode){e.next=5;break}return e.next=5,this.privAudioNode.detach();case 5:case"end":return e.stop()}}),e,this)})))}}]),e}()},,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(T){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),s=new I(r||[]);return o._invoke=function(e,t,n){var r=p;return function(i,o){if(r===v)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=R(s,n);if(a){if(a===l)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===p)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=v;var c=h(e,t,n);if("normal"===c.type){if(r=n.done?d:f,c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=d,n.method="throw",n.arg=c.arg)}}}(e,n,s),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=u;var p="suspendedStart",f="suspendedYield",v="executing",d="completed",l={};function y(){}function g(){}function m(){}var S={};S[o]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(x([])));w&&w!==n&&r.call(w,o)&&(S=w);var k=m.prototype=y.prototype=Object.create(S);function O(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,o,s,a){var c=h(e[i],e,o);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"===typeof p&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(p).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function R(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,R(e,n),"throw"===n.method))return l;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var i=h(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,l;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,l):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,l)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function x(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:A}}function A(){return{value:t,done:!0}}return g.prototype=k.constructor=m,m.constructor=g,g.displayName=c(m,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,a,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},O(C.prototype),C.prototype[s]=function(){return this},e.AsyncIterator=C,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new C(u(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},O(k),c(k,a,"Generator"),k[o]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=x,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return a.type="throw",a.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),u=r.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:x(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),l}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},,function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,i="/"===s.charAt(0))}return(i?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),s="/"===i(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&s&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),s=Math.min(i.length,o.length),a=s,c=0;c<s;c++)if(i[c]!==o[c]){a=c;break}var u=[];for(c=a;c<i.length;c++)u.push("..");return(u=u.concat(o.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===r&&(i=!1,r=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(50))},,,function(e,t,n){var r=n(131),i=n(132),o=n(49),s=n(133);e.exports=function(e){return r(e)||i(e)||o(e)||s()}},function(e,t,n){var r=n(62);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},,function(e,t,n){var r=n(136);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){var r=n(138),i=n(139),o=n(140);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var s=r(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return o(this,n)}}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t,n){var r=n(141),i=n(142);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?i(e):t}},function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}));n(26);var r,i=n(18),o=n(19);!function(e){e[e.None=0]="None",e[e.Resolved=1]="Resolved",e[e.Rejected=2]="Rejected"}(r||(r={}));var s=function(){function e(){var t=this;Object(i.a)(this,e),this.resolve=function(e){return t.privResolve(e),t},this.reject=function(e){return t.privReject(e),t},this.privPromise=new Promise((function(e,n){t.privResolve=e,t.privReject=n}))}return Object(o.a)(e,[{key:"promise",get:function(){return this.privPromise}}]),e}();function a(e,t,n){e.then((function(e){try{t&&t(e)}catch(i){if(n)try{if(i instanceof Error){var r=i;n(r.name+": "+r.message)}else n(i)}catch(i){}}}),(function(e){if(n)try{if(e instanceof Error){var t=e;n(t.name+": "+t.message)}else n(e)}catch(e){}}))}},function(e,t,n){var r=n(151),i=n(152),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){var r,i,o=n(70),s=n(71),a=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,h=t||[],p=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:i;if(null==p||null==f){var v=o();null==p&&(p=r=[1|v[0],v[1],v[2],v[3],v[4],v[5]]),null==f&&(f=i=16383&(v[6]<<8|v[7]))}var d=void 0!==e.msecs?e.msecs:(new Date).getTime(),l=void 0!==e.nsecs?e.nsecs:c+1,y=d-a+(l-c)/1e4;if(y<0&&void 0===e.clockseq&&(f=f+1&16383),(y<0||d>a)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=d,c=l,i=f;var g=(1e4*(268435455&(d+=122192928e5))+l)%4294967296;h[u++]=g>>>24&255,h[u++]=g>>>16&255,h[u++]=g>>>8&255,h[u++]=255&g;var m=d/4294967296*1e4&268435455;h[u++]=m>>>8&255,h[u++]=255&m,h[u++]=m>>>24&15|16,h[u++]=m>>>16&255,h[u++]=f>>>8|128,h[u++]=255&f;for(var S=0;S<6;++S)h[u+S]=p[S];return t||s(h)}},function(e,t,n){var r=n(70),i=n(71);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(18),i=n(19),o=n(30),s=n(34),a=function(){function e(t){var n=this;Object(r.a)(this,e),this.privEventListeners={},this.privIsDisposed=!1,this.onEvent=function(e){if(n.isDisposed())throw new o.c("EventSource");if(n.metadata)for(var t in n.metadata)t&&e.metadata&&(e.metadata[t]||(e.metadata[t]=n.metadata[t]));for(var r in n.privEventListeners)r&&n.privEventListeners[r]&&n.privEventListeners[r](e)},this.attach=function(e){var t=Object(s.a)();return n.privEventListeners[t]=e,{detach:function(){return delete n.privEventListeners[t],Promise.resolve()}}},this.attachListener=function(e){return n.attach(e.onEvent)},this.isDisposed=function(){return n.privIsDisposed},this.dispose=function(){n.privEventListeners=null,n.privIsDisposed=!0},this.privMetadata=t}return Object(i.a)(e,[{key:"metadata",get:function(){return this.privMetadata}}]),e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return w}));var r=n(20),i=n.n(r),o=n(22),s=n(23),a=n(18),c=n(19),u=n(72),h=n(197),p=n(153),f=n(195),v=n(194),d=n(34),l=n(44),y=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},g=function(){function e(){Object(a.a)(this,e)}return Object(c.a)(e,null,[{key:"createPushStream",value:function(e){return m.create(e)}},{key:"createPullStream",value:function(e,t){return b.create(e,t)}}]),e}(),m=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,null,[{key:"create",value:function(e){return new S(e)}}]),n}(g),S=function(t){Object(o.a)(r,t);var n=Object(s.a)(r);function r(e){var t;return Object(a.a)(this,r),(t=n.call(this)).onEvent=function(e){t.privEvents.onEvent(e),h.a.instance.onEvent(e)},t.privFormat=void 0===e?l.b.getDefaultInputFormat():e,t.privEvents=new p.a,t.privId=Object(d.a)(),t.privStream=new f.a(t.privFormat.avgBytesPerSec/10),t}return Object(c.a)(r,[{key:"format",get:function(){return Promise.resolve(this.privFormat)}},{key:"write",value:function(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},{key:"close",value:function(){this.privStream.close()}},{key:"id",value:function(){return this.privId}},{key:"blob",get:function(){var t=this;return this.attach("id").then((function(n){var r=[],i=e.from("");return function o(){return n.read().then((function(n){return!n||n.isEnd?"undefined"!==typeof XMLHttpRequest&&"undefined"!==typeof Blob?Promise.resolve(new Blob(r)):Promise.resolve(e.from(i)):("undefined"!==typeof Blob?r.push(n.buffer):i=e.concat([i,t.toBuffer(n.buffer)]),o())}))}()}))}},{key:"turnOn",value:function(){this.onEvent(new v.b(this.privId)),this.onEvent(new v.d(this.privId))}},{key:"attach",value:function(e){return y(this,void 0,void 0,i.a.mark((function t(){var n,r=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.onEvent(new v.f(this.privId,e)),t.next=3,this.turnOn();case 3:return n=this.privStream,this.onEvent(new v.e(this.privId,e)),t.abrupt("return",{detach:function(){return y(r,void 0,void 0,i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.readEnded(),this.onEvent(new v.g(this.privId,e)),t.abrupt("return",this.turnOff());case 3:case"end":return t.stop()}}),t,this)})))},id:function(){return e},read:function(){return n.read()}});case 6:case"end":return t.stop()}}),t,this)})))}},{key:"detach",value:function(e){this.onEvent(new v.g(this.privId,e))}},{key:"turnOff",value:function(){}},{key:"events",get:function(){return this.privEvents}},{key:"deviceInfo",get:function(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:u.f.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:u.g.Stream})}},{key:"toBuffer",value:function(t){for(var n=e.alloc(t.byteLength),r=new Uint8Array(t),i=0;i<n.length;++i)n[i]=r[i];return n}}]),r}(m),b=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.call(this)}return Object(c.a)(n,null,[{key:"create",value:function(e,t){return new w(e,t)}}]),n}(g),w=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r){var i;return Object(a.a)(this,n),(i=t.call(this)).onEvent=function(e){i.privEvents.onEvent(e),h.a.instance.onEvent(e)},i.privFormat=void 0===r?l.a.getDefaultInputFormat():r,i.privEvents=new p.a,i.privId=Object(d.a)(),i.privCallback=e,i.privIsClosed=!1,i.privBufferSize=i.privFormat.avgBytesPerSec/10,i}return Object(c.a)(n,[{key:"format",get:function(){return Promise.resolve(this.privFormat)}},{key:"close",value:function(){this.privIsClosed=!0,this.privCallback.close()}},{key:"id",value:function(){return this.privId}},{key:"blob",get:function(){return Promise.reject("Not implemented")}},{key:"turnOn",value:function(){this.onEvent(new v.b(this.privId)),this.onEvent(new v.d(this.privId))}},{key:"attach",value:function(e){return y(this,void 0,void 0,i.a.mark((function t(){var n=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.onEvent(new v.f(this.privId,e)),t.next=3,this.turnOn();case 3:return this.onEvent(new v.e(this.privId,e)),t.abrupt("return",{detach:function(){return n.privCallback.close(),n.onEvent(new v.g(n.privId,e)),n.turnOff()},id:function(){return e},read:function(){for(var e,t=0;t<n.privBufferSize;){var r=new ArrayBuffer(n.privBufferSize-t),i=n.privCallback.read(r);if(void 0===e)e=r;else new Int8Array(e).set(new Int8Array(r),t);if(0===i)break;t+=i}return Promise.resolve({buffer:e.slice(0,t),isEnd:n.privIsClosed||0===t,timeReceived:Date.now()})}});case 5:case"end":return t.stop()}}),t,this)})))}},{key:"detach",value:function(e){this.onEvent(new v.g(this.privId,e))}},{key:"turnOff",value:function(){}},{key:"events",get:function(){return this.privEvents}},{key:"deviceInfo",get:function(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:u.f.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:u.g.Stream})}}]),n}(b)}).call(this,n(73).Buffer)},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),s=r[0],a=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),h=0,p=a>0?s-4:s;for(n=0;n<p;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[h++]=t>>16&255,c[h++]=t>>8&255,c[h++]=255&t;2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[h++]=255&t);1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[h++]=t>>8&255,c[h++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,c=n-i;a<c;a+=s)o.push(h(e,a,a+s>c?c:a+s));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function h(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,h=-7,p=n?i-1:0,f=n?-1:1,v=e[t+p];for(p+=f,o=v&(1<<-h)-1,v>>=-h,h+=a;h>0;o=256*o+e[t+p],p+=f,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=256*s+e[t+p],p+=f,h-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(v?-1:1);s+=Math.pow(2,r),o-=u}return(v?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,c,u=8*o-i-1,h=(1<<u)-1,p=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,v=r?0:o-1,d=r?1:-1,l=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+p>=1?f/c:f*Math.pow(2,1-p))*c>=2&&(s++,c/=2),s+p>=h?(a=0,s=h):s+p>=1?(a=(t*c-1)*Math.pow(2,i),s+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,i),s=0));i>=8;e[n+v]=255&a,v+=d,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+v]=255&s,v+=d,s/=256,u-=8);e[n+v-d]|=128*l}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c}));var r,i=n(18),o=n(19),s=n(30),a=n(34);!function(e){e[e.Text=0]="Text",e[e.Binary=1]="Binary"}(r||(r={}));var c=function(){function e(t,n,o,c){if(Object(i.a)(this,e),this.privBody=null,t===r.Text&&n&&"string"!==typeof n)throw new s.b("Payload must be a string");if(t===r.Binary&&n&&!(n instanceof ArrayBuffer))throw new s.b("Payload must be ArrayBuffer");switch(this.privMessageType=t,this.privBody=n,this.privHeaders=o||{},this.privId=c||Object(a.a)(),this.messageType){case r.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case r.Text:this.privSize=this.textBody.length}}return Object(o.a)(e,[{key:"messageType",get:function(){return this.privMessageType}},{key:"headers",get:function(){return this.privHeaders}},{key:"body",get:function(){return this.privBody}},{key:"textBody",get:function(){if(this.privMessageType===r.Binary)throw new s.b("Not supported for binary message");return this.privBody}},{key:"binaryBody",get:function(){if(this.privMessageType===r.Text)throw new s.b("Not supported for text message");return this.privBody}},{key:"id",get:function(){return this.privId}}]),e}()},,,function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return k}));var i=n(20),o=n.n(i),s=n(18),a=n(19),c=n(163),u=n(164),h=n.n(u),p=n(167),f=n(172),v=n(197),d=n(168),l=n.n(d),y=n(169),g=n.n(y),m=n(170),S=n.n(m),b=n(171),w=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},k=function(){function t(n){Object(s.a)(this,t),n&&(this.privProxyInfo=n),t.privDiskCache||(t.privDiskCache=new g.a("microsoft-cognitiveservices-speech-sdk-cache",{supportBuffer:!0,location:"undefined"!==typeof e&&Object({NODE_ENV:"production",PUBLIC_URL:"/speech-to-code",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_HN:"seg-sc-client",REACT_APP_HV:"ghp",REACT_APP_STT_ENDPOINT:"https://speech2code.azurewebsites.net"}).SPEECH_OCSP_CACHE_ROOT?Object({NODE_ENV:"production",PUBLIC_URL:"/speech-to-code",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_HN:"seg-sc-client",REACT_APP_HV:"ghp",REACT_APP_STT_ENDPOINT:"https://speech2code.azurewebsites.net"}).SPEECH_OCSP_CACHE_ROOT:void 0}))}return Object(a.a)(t,[{key:"GetAgent",value:function(e){var t=new l.a.Agent(this.CreateConnection);if(void 0!==this.privProxyInfo&&void 0!==this.privProxyInfo.HostName&&this.privProxyInfo.Port>0){t.privProxyInfo=this.privProxyInfo}return t}},{key:"CreateConnection",value:function(n,r){var i,o="undefined"!==typeof e&&"0"!==Object({NODE_ENV:"production",PUBLIC_URL:"/speech-to-code",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_HN:"seg-sc-client",REACT_APP_HV:"ghp",REACT_APP_STT_ENDPOINT:"https://speech2code.azurewebsites.net"}).NODE_TLS_REJECT_UNAUTHORIZED&&"0"!==Object({NODE_ENV:"production",PUBLIC_URL:"/speech-to-code",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_HN:"seg-sc-client",REACT_APP_HV:"ghp",REACT_APP_STT_ENDPOINT:"https://speech2code.azurewebsites.net"}).SPEECH_CONDUCT_OCSP_CHECK&&r.secureEndpoint;if(r=Object.assign(Object.assign({},r),{requestOCSP:!t.forceDisableOCSPStapling,servername:r.host}),this.privProxyInfo){var s=t.GetProxyAgent(this.privProxyInfo);i=new Promise((function(e,t){s.callback(n,r,(function(n,r){n?t(n):e(r)}))}))}else i=r.secureEndpoint?Promise.resolve(c.connect(r)):Promise.resolve(b.connect(r));return o?t.OCSPCheck(i,this.privProxyInfo):i}}],[{key:"forceReinitDiskCache",value:function(){t.privDiskCache=void 0,t.privMemCache={}}},{key:"GetProxyAgent",value:function(e){var t={host:e.HostName,port:e.Port};return e.UserName?t.headers={"Proxy-Authentication":"Basic "+new r(e.UserName+":"+(void 0===e.Password)?"":e.Password).toString("base64")}:t.headers={},t.headers.requestOCSP="true",new S.a(t)}},{key:"OCSPCheck",value:function(e,n){return w(this,void 0,void 0,o.a.mark((function r(){var i,s,a,c,u,h=this;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=!1,r.next=3,e;case 3:return(c=r.sent).cork(),u=c,r.abrupt("return",new Promise((function(e,r){c.on("OCSPResponse",(function(e){e&&(h.onEvent(new f.n),s=e)})),c.on("error",(function(e){a||(a=!0,c.destroy(),r(e))})),u.on("secure",(function(){return w(h,void 0,void 0,o.a.mark((function h(){var f,v,d,l;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return f=u.getPeerCertificate(!0),o.prev=1,o.next=4,this.GetIssuer(f);case 4:if(v=o.sent,i=p.request.generate(f.raw,v.raw),d=i.id.toString("hex"),s){o.next=12;break}return o.next=10,t.GetResponseFromCache(d,i,n);case 10:l=o.sent,s=l;case 12:return o.next=14,this.VerifyOCSPResponse(s,i,n);case 14:c.uncork(),a=!0,e(c),o.next=24;break;case 19:o.prev=19,o.t0=o.catch(1),c.destroy(),a=!0,r(o.t0);case 24:case"end":return o.stop()}}),h,this,[[1,19]])})))}))})));case 7:case"end":return r.stop()}}),r)})))}},{key:"GetIssuer",value:function(e){return e.issuerCertificate?Promise.resolve(e.issuerCertificate):new Promise((function(t,n){new p.Agent({}).fetchIssuer(e,null,(function(e,r){e?n(e):t(r)}))}))}},{key:"GetResponseFromCache",value:function(e,n,r){return w(this,void 0,void 0,o.a.mark((function i(){var s,a,c,u,h,v,d,l=this;return o.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if((s=t.privMemCache[e])&&this.onEvent(new f.k(e)),s){i.next=13;break}return i.prev=3,i.next=6,t.privDiskCache.get(e);case 6:(a=i.sent).isCached&&(t.onEvent(new f.i(e)),t.StoreMemoryCacheEntry(e,a.value),s=a.value),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(3),s=null;case 13:if(s){i.next=15;break}return i.abrupt("return",s);case 15:if(i.prev=15,c=p.utils.parseResponse(s),!((u=c.value.tbsResponseData).responses.length<1)){i.next=21;break}return this.onEvent(new f.c(e,"Not enough data in cached response")),i.abrupt("return");case 21:h=u.responses[0].thisUpdate,(v=u.responses[0].nextUpdate)<Date.now()+this.testTimeOffset-6e4?(this.onEvent(new f.a(e,v)),s=null):(d=Math.min(864e5,(v-h)/2),v-(Date.now()+this.testTimeOffset)<d?(this.onEvent(new f.b(e,h,v)),this.UpdateCache(n,r).catch((function(t){l.onEvent(new f.f(e,t.toString()))}))):this.onEvent(new f.d(e,h,v))),i.next=30;break;case 26:i.prev=26,i.t1=i.catch(15),this.onEvent(new f.c(e,i.t1)),s=null;case 30:return s||this.onEvent(new f.e(e)),i.abrupt("return",s);case 32:case"end":return i.stop()}}),i,this,[[3,10],[15,26]])})))}},{key:"VerifyOCSPResponse",value:function(e,n,r){return w(this,void 0,void 0,o.a.mark((function i(){var s,a=this;return o.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(s=e,n.certID.toString("hex"),s){i.next=6;break}return i.next=5,t.GetOCSPResponse(n,r);case 5:s=i.sent;case 6:return i.abrupt("return",new Promise((function(i,o){p.verify({request:n,response:s},(function(c,u){c?(t.onEvent(new f.o(n.id.toString("hex"),c)),e?a.VerifyOCSPResponse(null,n,r).then((function(){i()}),(function(e){o(e)})):o(c)):(e||t.StoreCacheEntry(n.id.toString("hex"),s),i())}))})));case 7:case"end":return i.stop()}}),i)})))}},{key:"UpdateCache",value:function(e,t){return w(this,void 0,void 0,o.a.mark((function n(){var r,i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.id.toString("hex"),this.onEvent(new f.g(r)),n.next=4,this.GetOCSPResponse(e,t);case 4:i=n.sent,this.StoreCacheEntry(r,i),this.onEvent(new f.h(e.id.toString("hex")));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"StoreCacheEntry",value:function(e,t){this.StoreMemoryCacheEntry(e,t),this.StoreDiskCacheEntry(e,t)}},{key:"StoreMemoryCacheEntry",value:function(e,t){this.privMemCache[e]=t,this.onEvent(new f.l(e))}},{key:"StoreDiskCacheEntry",value:function(e,t){var n=this;this.privDiskCache.set(e,t).then((function(){n.onEvent(new f.j(e))}))}},{key:"GetOCSPResponse",value:function(e,n){var r=this,i={};if(n){var o=t.GetProxyAgent(n);i.agent=o}return new Promise((function(t,n){p.utils.getAuthorityInfo(e.cert,"1.3.6.1.5.5.7.48.1",(function(o,s){if(o)n(o);else{var a=h.a(s);a.path=a.pathname,i=Object.assign(Object.assign({},i),a),p.utils.getResponse(i,e.data,(function(i,o){i?n(i):(r.onEvent(new f.m(e.certID.toString("hex"))),t(o))}))}}))}))}}]),t}();k.testTimeOffset=0,k.forceDisableOCSPStapling=!1,k.privMemCache={},k.onEvent=function(e){v.a.instance.onEvent(e)}}).call(this,n(50),n(73).Buffer)},,function(e,t,n){"use strict";(function(t){var r=n(165),i=n(166),o=/^[A-Za-z][A-Za-z0-9+-.]*:[\\/]+/,s=/^([a-z][a-z0-9.+-]*:)?([\\/]{1,})?([\S\s]*)/i,a=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function c(e){return(e||"").toString().replace(a,"")}var u=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function p(e){var n,r=("undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{}).location||{},i={},s=typeof(e=e||r);if("blob:"===e.protocol)i=new v(unescape(e.pathname),{});else if("string"===s)for(n in i=new v(e,{}),h)delete i[n];else if("object"===s){for(n in e)n in h||(i[n]=e[n]);void 0===i.slashes&&(i.slashes=o.test(e.href))}return i}function f(e){e=c(e);var t=s.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!(t[2]&&t[2].length>=2),rest:t[2]&&1===t[2].length?"/"+t[3]:t[3]}}function v(e,t,n){if(e=c(e),!(this instanceof v))return new v(e,t,n);var o,s,a,h,d,l,y=u.slice(),g=typeof t,m=this,S=0;for("object"!==g&&"string"!==g&&(n=t,t=null),n&&"function"!==typeof n&&(n=i.parse),t=p(t),o=!(s=f(e||"")).protocol&&!s.slashes,m.slashes=s.slashes||o&&t.slashes,m.protocol=s.protocol||t.protocol||"",e=s.rest,s.slashes||(y[3]=[/(.*)/,"pathname"]);S<y.length;S++)"function"!==typeof(h=y[S])?(a=h[0],l=h[1],a!==a?m[l]=e:"string"===typeof a?~(d=e.indexOf(a))&&("number"===typeof h[2]?(m[l]=e.slice(0,d),e=e.slice(d+h[2])):(m[l]=e.slice(d),e=e.slice(0,d))):(d=a.exec(e))&&(m[l]=d[1],e=e.slice(0,d.index)),m[l]=m[l]||o&&h[3]&&t[l]||"",h[4]&&(m[l]=m[l].toLowerCase())):e=h(e);n&&(m.query=n(m.query)),o&&t.slashes&&"/"!==m.pathname.charAt(0)&&(""!==m.pathname||""!==t.pathname)&&(m.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,s=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),s++):s&&(0===r&&(o=!0),n.splice(r,1),s--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(m.pathname,t.pathname)),"/"!==m.pathname.charAt(0)&&m.hostname&&(m.pathname="/"+m.pathname),r(m.port,m.protocol)||(m.host=m.hostname,m.port=""),m.username=m.password="",m.auth&&(h=m.auth.split(":"),m.username=h[0]||"",m.password=h[1]||""),m.origin=m.protocol&&m.host&&"file:"!==m.protocol?m.protocol+"//"+m.host:"null",m.href=m.toString()}v.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"===typeof t&&t.length&&(t=(n||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,/:\d+$/.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";o[e]=t.charAt(0)!==s?s+t:t}else o[e]=t;break;default:o[e]=t}for(var a=0;a<u.length;a++){var c=u[a];c[4]&&(o[c[1]]=o[c[1]].toLowerCase())}return o.origin=o.protocol&&o.host&&"file:"!==o.protocol?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"===typeof e||(e=i.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(n.slashes?"//":"");return n.username&&(o+=n.username,n.password&&(o+=":"+n.password),o+="@"),o+=n.host+n.pathname,(t="object"===typeof n.query?e(n.query):n.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}},v.extractProtocol=f,v.location=p,v.trimLeft=c,v.qs=i,e.exports=v}).call(this,n(42))},function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function o(e){try{return encodeURIComponent(e)}catch(t){return null}}t.stringify=function(e,t){t=t||"";var n,i,s=[];for(i in"string"!==typeof t&&(t="?"),e)if(r.call(e,i)){if((n=e[i])||null!==n&&undefined!==n&&!isNaN(n)||(n=""),i=o(i),n=o(n),null===i||null===n)continue;s.push(i+"="+n)}return s.length?t+s.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var o=i(t[1]),s=i(t[2]);null===o||null===s||o in r||(r[o]=s)}return r}},,,,,,function(e,t,n){"use strict";n.d(t,"k",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"i",(function(){return h})),n.d(t,"g",(function(){return p})),n.d(t,"l",(function(){return f})),n.d(t,"j",(function(){return v})),n.d(t,"h",(function(){return d})),n.d(t,"n",(function(){return l})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return m})),n.d(t,"o",(function(){return S})),n.d(t,"c",(function(){return b})),n.d(t,"m",(function(){return w})),n.d(t,"f",(function(){return k}));var r=n(18),i=n(22),o=n(23),s=n(55),a=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e,i,o){var s;return Object(r.a)(this,n),(s=t.call(this,e,i)).privSignature=o,s}return n}(s.b),c=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,"OCSPMemoryCacheHitEvent",s.a.Debug,e)}return n}(a),u=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,"OCSPCacheMissEvent",s.a.Debug,e)}return n}(a),h=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,"OCSPDiskCacheHitEvent",s.a.Debug,e)}return n}(a),p=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,"OCSPCacheUpdateNeededEvent",s.a.Debug,e)}return n}(a),f=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,"OCSPMemoryCacheStoreEvent",s.a.Debug,e)}return n}(a),v=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,"OCSPDiskCacheStoreEvent",s.a.Debug,e)}return n}(a),d=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,"OCSPCacheUpdatehCompleteEvent",s.a.Debug,e)}return n}(a),l=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.call(this,"OCSPStapleReceivedEvent",s.a.Debug,"")}return n}(a),y=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e,i){var o;return Object(r.a)(this,n),(o=t.call(this,"OCSPCacheEntryExpiredEvent",s.a.Debug,e)).privExpireTime=i,o}return n}(a),g=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e,i,o){var a;return Object(r.a)(this,n),(a=t.call(this,"OCSPCacheEntryNeedsRefreshEvent",s.a.Debug,e)).privExpireTime=o,a.privStartTime=i,a}return n}(a),m=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e,i,o){var a;return Object(r.a)(this,n),(a=t.call(this,"OCSPCacheHitEvent",s.a.Debug,e)).privExpireTime=o,a.privExpireTimeString=new Date(o).toLocaleDateString(),a.privStartTime=i,a.privStartTimeString=new Date(i).toLocaleTimeString(),a}return n}(a),S=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e,i){var o;return Object(r.a)(this,n),(o=t.call(this,"OCSPVerificationFailedEvent",s.a.Debug,e)).privError=i,o}return n}(a),b=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e,i){var o;return Object(r.a)(this,n),(o=t.call(this,"OCSPCacheFetchErrorEvent",s.a.Debug,e)).privError=i,o}return n}(a),w=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,"OCSPResponseRetrievedEvent",s.a.Debug,e)}return n}(a),k=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e,i){var o;return Object(r.a)(this,n),(o=t.call(this,"OCSPCacheUpdateErrorEvent",s.a.Debug,e)).privError=i,o}return n}(a)},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r,i=n(20),o=n.n(i),s=n(26),a=n(18),c=n(19),u=n(30),h=function e(t){var n=this;if(Object(a.a)(this,e),this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.get=function(e){return n.throwIfDisposed(),n.privList[e]},this.first=function(){return n.get(0)},this.last=function(){return n.get(n.length()-1)},this.add=function(e){n.throwIfDisposed(),n.insertAt(n.privList.length,e)},this.insertAt=function(e,t){n.throwIfDisposed(),0===e?n.privList.unshift(t):e===n.privList.length?n.privList.push(t):n.privList.splice(e,0,t),n.triggerSubscriptions(n.privAddSubscriptions)},this.removeFirst=function(){return n.throwIfDisposed(),n.removeAt(0)},this.removeLast=function(){return n.throwIfDisposed(),n.removeAt(n.length()-1)},this.removeAt=function(e){return n.throwIfDisposed(),n.remove(e,1)[0]},this.remove=function(e,t){n.throwIfDisposed();var r=n.privList.splice(e,t);return n.triggerSubscriptions(n.privRemoveSubscriptions),r},this.clear=function(){n.throwIfDisposed(),n.remove(0,n.length())},this.length=function(){return n.throwIfDisposed(),n.privList.length},this.onAdded=function(e){n.throwIfDisposed();var t=n.privSubscriptionIdCounter++;return n.privAddSubscriptions[t]=e,{detach:function(){return delete n.privAddSubscriptions[t],Promise.resolve()}}},this.onRemoved=function(e){n.throwIfDisposed();var t=n.privSubscriptionIdCounter++;return n.privRemoveSubscriptions[t]=e,{detach:function(){return delete n.privRemoveSubscriptions[t],Promise.resolve()}}},this.onDisposed=function(e){n.throwIfDisposed();var t=n.privSubscriptionIdCounter++;return n.privDisposedSubscriptions[t]=e,{detach:function(){return delete n.privDisposedSubscriptions[t],Promise.resolve()}}},this.join=function(e){return n.throwIfDisposed(),n.privList.join(e)},this.toArray=function(){var e=Array();return n.privList.forEach((function(t){e.push(t)})),e},this.any=function(e){return n.throwIfDisposed(),e?n.where(e).length()>0:n.length()>0},this.all=function(e){return n.throwIfDisposed(),n.where(e).length()===n.length()},this.forEach=function(e){n.throwIfDisposed();for(var t=0;t<n.length();t++)e(n.privList[t],t)},this.select=function(t){n.throwIfDisposed();for(var r=[],i=0;i<n.privList.length;i++)r.push(t(n.privList[i],i));return new e(r)},this.where=function(t){n.throwIfDisposed();for(var r=new e,i=0;i<n.privList.length;i++)t(n.privList[i],i)&&r.add(n.privList[i]);return r},this.orderBy=function(t){n.throwIfDisposed();var r=n.toArray().sort(t);return new e(r)},this.orderByDesc=function(e){return n.throwIfDisposed(),n.orderBy((function(t,n){return e(n,t)}))},this.clone=function(){return n.throwIfDisposed(),new e(n.toArray())},this.concat=function(t){return n.throwIfDisposed(),new e(n.privList.concat(t.toArray()))},this.concatArray=function(t){return n.throwIfDisposed(),new e(n.privList.concat(t))},this.isDisposed=function(){return null==n.privList},this.dispose=function(e){n.isDisposed()||(n.privDisposeReason=e,n.privList=null,n.privAddSubscriptions=null,n.privRemoveSubscriptions=null,n.triggerSubscriptions(n.privDisposedSubscriptions))},this.throwIfDisposed=function(){if(n.isDisposed())throw new u.c("List",n.privDisposeReason)},this.triggerSubscriptions=function(e){if(e)for(var t in e)t&&e[t]()},this.privList=[],t){var r,i=Object(s.a)(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.privList.push(o)}}catch(c){i.e(c)}finally{i.f()}}},p=n(149),f=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};!function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"}(r||(r={}));var v=function(){function e(t){var n=this;Object(a.a)(this,e),this.privPromiseStore=new h,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.enqueue=function(e){n.throwIfDispose(),n.enqueueFromPromise(new Promise((function(t,n){t(e)})))},this.enqueueFromPromise=function(e){n.throwIfDispose(),e.then((function(e){n.privList.add(e)}),(function(e){}))},this.dequeue=function(){n.throwIfDispose();var e=new p.a;return n.privSubscribers&&(n.privSubscribers.add({deferral:e,type:r.Dequeue}),n.drain()),e.promise},this.peek=function(){n.throwIfDispose();var e=new p.a;return n.privSubscribers&&(n.privSubscribers.add({deferral:e,type:r.Peek}),n.drain()),e.promise},this.length=function(){return n.throwIfDispose(),n.privList.length()},this.isDisposed=function(){return null==n.privSubscribers},this.drain=function(){if(!n.privIsDrainInProgress&&!n.privIsDisposing){n.privIsDrainInProgress=!0;var e=n.privSubscribers,t=n.privList;if(e&&t){for(;t.length()>0&&e.length()>0&&!n.privIsDisposing;){var i=e.removeFirst();if(i.type===r.Peek)i.deferral.resolve(t.first());else{var o=t.removeFirst();i.deferral.resolve(o)}}n.privSubscribers===e&&(n.privSubscribers=e),n.privList===t&&(n.privList=t)}n.privIsDrainInProgress=!1}},this.throwIfDispose=function(){if(n.isDisposed()){if(n.privDisposeReason)throw new u.b(n.privDisposeReason);throw new u.c("Queue")}if(n.privIsDisposing)throw new u.b("Queue disposing")},this.privList=t||new h,this.privDetachables=[],this.privSubscribers=new h,this.privDetachables.push(this.privList.onAdded(this.drain))}return Object(c.a)(e,[{key:"drainAndDispose",value:function(e,t){return f(this,void 0,void 0,o.a.mark((function n(){var r,i,a,c,u,h=this;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.isDisposed()||this.privIsDisposing){n.next=30;break}if(this.privDisposeReason=t,this.privIsDisposing=!0,r=this.privSubscribers){for(;r.length()>0;)r.removeFirst().deferral.resolve(void 0);this.privSubscribers===r&&(this.privSubscribers=r)}i=Object(s.a)(this.privDetachables),n.prev=6,i.s();case 8:if((a=i.n()).done){n.next=14;break}return c=a.value,n.next=12,c.detach();case 12:n.next=8;break;case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(6),i.e(n.t0);case 19:return n.prev=19,i.f(),n.finish(19);case 22:if(!(this.privPromiseStore.length()>0&&e)){n.next=28;break}return u=[],this.privPromiseStore.toArray().forEach((function(e){u.push(e)})),n.abrupt("return",Promise.all(u).finally((function(){h.privSubscribers=null,h.privList.forEach((function(t,n){e(t)})),h.privList=null})).then());case 28:this.privSubscribers=null,this.privList=null;case 30:case"end":return n.stop()}}),n,this,[[6,16,19,22]])})))}},{key:"dispose",value:function(e){return f(this,void 0,void 0,o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.drainAndDispose(null,e);case 2:case"end":return t.stop()}}),t,this)})))}}]),e}()},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(20),i=n.n(r),o=n(18),s=n(19),a=n(72),c=n(96),u=n(82),h=n(83),p=n(149),f=n(35),v=n(212),d=n(198),l=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},y=function(){function e(t,n,r){Object(o.a)(this,e),this.audioConfig=void 0!==t?t:v.a.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=n.clone(),this.privConnectionFactory=r,this.implCommonRecognizerSetup()}return Object(s.a)(e,[{key:"close",value:function(e,t){f.a.throwIfDisposed(this.privDisposed),Object(p.b)(this.dispose(!0),e,t)}},{key:"internalData",get:function(){return this.privReco}},{key:"dispose",value:function(e){return l(this,void 0,void 0,i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.privDisposed){t.next=2;break}return t.abrupt("return");case 2:if(this.privDisposed=!0,!e){t.next=9;break}if(!this.privReco){t.next=9;break}return t.next=7,this.privReco.audioSource.turnOff();case 7:return t.next=9,this.privReco.dispose();case 9:case"end":return t.stop()}}),t,this)})))}},{key:"implCommonRecognizerSetup",value:function(){var t="undefined"!==typeof window?"Browser":"Node",n="unknown",r="unknown";"undefined"!==typeof navigator&&(t=t+"/"+navigator.platform,n=navigator.userAgent,r=navigator.appVersion);var i=this.createRecognizerConfig(new a.e(new a.a(new a.b(t,n,r))));this.privReco=this.createServiceRecognizer(e.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,i)}},{key:"recognizeOnceAsyncImpl",value:function(e){return l(this,void 0,void 0,i.a.mark((function t(){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f.a.throwIfDisposed(this.privDisposed),n=new p.a,t.next=4,this.implRecognizerStop();case 4:return t.next=6,this.privReco.recognize(e,n.resolve,n.reject);case 6:return t.next=8,n.promise;case 8:return r=t.sent,t.next=11,this.implRecognizerStop();case 11:return t.abrupt("return",r);case 12:case"end":return t.stop()}}),t,this)})))}},{key:"startContinuousRecognitionAsyncImpl",value:function(e){return l(this,void 0,void 0,i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f.a.throwIfDisposed(this.privDisposed),t.next=3,this.implRecognizerStop();case 3:return t.next=5,this.privReco.recognize(e,void 0,void 0);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"stopContinuousRecognitionAsyncImpl",value:function(){return l(this,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.a.throwIfDisposed(this.privDisposed),e.next=3,this.implRecognizerStop();case 3:case"end":return e.stop()}}),e,this)})))}},{key:"implRecognizerStop",value:function(){return l(this,void 0,void 0,i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.privReco){e.next=3;break}return e.next=3,this.privReco.stopRecognizing();case 3:return e.abrupt("return");case 4:case"end":return e.stop()}}),e,this)})))}}],[{key:"telemetryEnabled",get:function(){return c.a.telemetryDataEnabled}},{key:"enableTelemetry",value:function(e){c.a.telemetryDataEnabled=e}},{key:"getAuthFromProperties",value:function(e){var t=e.getProperty(d.a.SpeechServiceConnection_Key,void 0);return t&&""!==t?new u.a(t):new h.a((function(t){var n=e.getProperty(d.a.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(n)}),(function(t){var n=e.getProperty(d.a.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(n)}))}}]),e}()},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"f",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return y})),n.d(t,"h",(function(){return g}));var r=n(18),i=n(19),o=n(22),s=n(23),a=n(55),c=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){var o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.a.Info;return Object(r.a)(this,n),(o=t.call(this,e,s)).privAudioSourceId=i,o}return Object(i.a)(n,[{key:"audioSourceId",get:function(){return this.privAudioSourceId}}]),n}(a.b),u=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,"AudioSourceInitializingEvent",e)}return n}(c),h=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,"AudioSourceReadyEvent",e)}return n}(c),p=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,"AudioSourceOffEvent",e)}return n}(c),f=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){var o;return Object(r.a)(this,n),(o=t.call(this,"AudioSourceErrorEvent",e,a.a.Error)).privError=i,o}return Object(i.a)(n,[{key:"error",get:function(){return this.privError}}]),n}(c),v=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,o){var s;return Object(r.a)(this,n),(s=t.call(this,e,i)).privAudioNodeId=o,s}return Object(i.a)(n,[{key:"audioNodeId",get:function(){return this.privAudioNodeId}}]),n}(c),d=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){return Object(r.a)(this,n),t.call(this,"AudioStreamNodeAttachingEvent",e,i)}return n}(v),l=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){return Object(r.a)(this,n),t.call(this,"AudioStreamNodeAttachedEvent",e,i)}return n}(v),y=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){return Object(r.a)(this,n),t.call(this,"AudioStreamNodeDetachedEvent",e,i)}return n}(v),g=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,o){var s;return Object(r.a)(this,n),(s=t.call(this,"AudioStreamNodeErrorEvent",e,i)).privError=o,s}return Object(i.a)(n,[{key:"error",get:function(){return this.privError}}]),n}(v)},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(18),i=n(19),o=n(98),s=n(38),a=n(22),c=n(23),u=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e,i){var o;return Object(r.a)(this,n),(o=t.call(this,i)).privTargetChunkSize=e,o.privNextBufferReadyBytes=0,o}return Object(i.a)(n,[{key:"writeStreamChunk",value:function(e){if(e.isEnd||0===this.privNextBufferReadyBytes&&e.buffer.byteLength===this.privTargetChunkSize)Object(o.a)(Object(s.a)(n.prototype),"writeStreamChunk",this).call(this,e);else for(var t=0;t<e.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=e.timeReceived);var r=Math.min(e.buffer.byteLength-t,this.privTargetChunkSize-this.privNextBufferReadyBytes),i=new Uint8Array(this.privNextBufferToWrite),a=new Uint8Array(e.buffer.slice(t,r+t));i.set(a,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=r,t+=r,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(Object(o.a)(Object(s.a)(n.prototype),"writeStreamChunk",this).call(this,{buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}},{key:"close",value:function(){0===this.privNextBufferReadyBytes||this.isClosed||Object(o.a)(Object(s.a)(n.prototype),"writeStreamChunk",this).call(this,{buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),Object(o.a)(Object(s.a)(n.prototype),"close",this).call(this)}}]),n}(n(196).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(20),i=n.n(r),o=n(18),s=n(19),a=n(30),c=n(34),u=n(190),h=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},p=function(){function e(t){var n=this;Object(o.a)(this,e),this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.read=function(){if(n.privIsReadEnded)throw new a.b("Stream read has already finished");return n.privReaderQueue.dequeue().then((function(e){return h(n,void 0,void 0,i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e&&!e.isEnd){t.next=3;break}return t.next=3,this.privReaderQueue.dispose("End of stream reached");case 3:return t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)})))}))},this.readEnded=function(){n.privIsReadEnded||(n.privIsReadEnded=!0,n.privReaderQueue=new u.a)},this.throwIfClosed=function(){if(n.privIsWriteEnded)throw new a.b("Stream closed")},this.privId=t||Object(c.a)(),this.privReaderQueue=new u.a}return Object(s.a)(e,[{key:"isClosed",get:function(){return this.privIsWriteEnded}},{key:"isReadEnded",get:function(){return this.privIsReadEnded}},{key:"id",get:function(){return this.privId}},{key:"close",value:function(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}},{key:"writeStreamChunk",value:function(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch(t){}}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(18),i=n(19),o=n(30),s=n(153),a=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"instance",get:function(){return e.privInstance}}]),e}();a.privInstance=new s.a,a.setEventSource=function(e){if(!e)throw new o.a("eventSource");a.privInstance=e}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",e[e.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.SpeechServiceConnection_EnableAudioLogging=32]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceResponse_ProfanityOption=33]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=34]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=35]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=36]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=37]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=38]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.Conversation_ApplicationId=39]="Conversation_ApplicationId",e[e.Conversation_DialogType=40]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=41]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=42]="Conversation_From_Id",e[e.Conversation_Conversation_Id=43]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=44]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=45]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=46]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=47]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=48]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=49]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=50]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=51]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=52]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=53]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=54]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=55]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=56]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=57]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=58]="PronunciationAssessment_Params"}(r||(r={}))},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"}(r||(r={}))},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError"}(r||(r={}))},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizingIntent=4]="RecognizingIntent",e[e.RecognizedIntent=5]="RecognizedIntent",e[e.TranslatingSpeech=6]="TranslatingSpeech",e[e.TranslatedSpeech=7]="TranslatedSpeech",e[e.SynthesizingAudio=8]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=9]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=10]="SynthesizingAudioStarted",e[e.EnrollingVoiceProfile=11]="EnrollingVoiceProfile",e[e.EnrolledVoiceProfile=12]="EnrolledVoiceProfile",e[e.RecognizedSpeakers=13]="RecognizedSpeakers",e[e.RecognizedSpeaker=14]="RecognizedSpeaker",e[e.ResetVoiceProfile=15]="ResetVoiceProfile",e[e.DeletedVoiceProfile=16]="DeletedVoiceProfile"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(18),i=n(19),o=n(198),s=function(){function e(){Object(r.a)(this,e),this.privKeys=[],this.privValues=[]}return Object(i.a)(e,[{key:"getProperty",value:function(e,t){var n;n="string"===typeof e?e:o.a[e];for(var r=0;r<this.privKeys.length;r++)if(this.privKeys[r]===n)return this.privValues[r];return t}},{key:"setProperty",value:function(e,t){var n;n="string"===typeof e?e:o.a[e];for(var r=0;r<this.privKeys.length;r++)if(this.privKeys[r]===n)return void(this.privValues[r]=t);this.privKeys.push(n),this.privValues.push(t)}},{key:"clone",value:function(){for(var t=new e,n=0;n<this.privKeys.length;n++)t.privKeys.push(this.privKeys[n]),t.privValues.push(this.privValues[n]);return t}},{key:"mergeTo",value:function(e){var t=this;this.privKeys.forEach((function(n){if(void 0===e.getProperty(n,void 0)){var r=t.getProperty(n);e.setProperty(n,r)}}))}}]),e}()},function(e,t,n){"use strict";n.d(t,"h",(function(){return c})),n.d(t,"g",(function(){return h})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return y}));var r=n(18),i=n(19),o=n(22),s=n(23),a=n(55),c=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){var o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.a.Info;return Object(r.a)(this,n),(o=t.call(this,e,s)).privJsonResult=i,o}return Object(i.a)(n,[{key:"jsonString",get:function(){return this.privJsonResult}}]),n}(a.b),u=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){var o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.a.Info;return Object(r.a)(this,n),(o=t.call(this,e,s)).privConnectionId=i,o}return Object(i.a)(n,[{key:"connectionId",get:function(){return this.privConnectionId}}]),n}(a.b),h=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,o){var s;return Object(r.a)(this,n),(s=t.call(this,"ConnectionStartEvent",e)).privUri=i,s.privHeaders=o,s}return Object(i.a)(n,[{key:"uri",get:function(){return this.privUri}},{key:"headers",get:function(){return this.privHeaders}}]),n}(u),p=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){return Object(r.a)(this,n),t.call(this,"ConnectionEstablishedEvent",e)}return n}(u),f=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,o){var s;return Object(r.a)(this,n),(s=t.call(this,"ConnectionClosedEvent",e,a.a.Debug)).privReason=o,s.privStatusCode=i,s}return Object(i.a)(n,[{key:"reason",get:function(){return this.privReason}},{key:"statusCode",get:function(){return this.privStatusCode}}]),n}(u),v=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,o){var s;return Object(r.a)(this,n),(s=t.call(this,"ConnectionErrorEvent",e,a.a.Debug)).privMessage=i,s.privType=o,s}return Object(i.a)(n,[{key:"message",get:function(){return this.privMessage}},{key:"type",get:function(){return this.privType}}]),n}(u),d=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,o){var s;return Object(r.a)(this,n),(s=t.call(this,"ConnectionEstablishErrorEvent",e,a.a.Error)).privStatusCode=i,s.privReason=o,s}return Object(i.a)(n,[{key:"reason",get:function(){return this.privReason}},{key:"statusCode",get:function(){return this.privStatusCode}}]),n}(u),l=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,o){var s;return Object(r.a)(this,n),(s=t.call(this,"ConnectionMessageReceivedEvent",e)).privNetworkReceivedTime=i,s.privMessage=o,s}return Object(i.a)(n,[{key:"networkReceivedTime",get:function(){return this.privNetworkReceivedTime}},{key:"message",get:function(){return this.privMessage}}]),n}(u),y=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i,o){var s;return Object(r.a)(this,n),(s=t.call(this,"ConnectionMessageSentEvent",e)).privNetworkSentTime=i,s.privMessage=o,s}return Object(i.a)(n,[{key:"networkSentTime",get:function(){return this.privNetworkSentTime}},{key:"message",get:function(){return this.privMessage}}]),n}(u)},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(18),i=n(19),o=n(22),s=n(23),a=n(55),c=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,"BackgroundEvent",a.a.Error)).privError=e,i}return Object(i.a)(n,[{key:"error",get:function(){return this.privError}}]),n}(a.b)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(18),i=n(19),o=function(){function e(t){Object(r.a)(this,e),this.privSessionId=t}return Object(i.a)(e,[{key:"sessionId",get:function(){return this.privSessionId}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(18),i=n(19),o=n(22),s=n(23),a=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,i){var o;return Object(r.a)(this,n),(o=t.call(this,i)).privOffset=e,o}return Object(i.a)(n,[{key:"offset",get:function(){return this.privOffset}}]),n}(n(206).a)},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(r||(r={}))},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.UriQueryParameter=0]="UriQueryParameter"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(20),i=n.n(r),o=n(18),s=n(19),a=n(98),c=n(38),u=n(22),h=n(23),p=n(93),f=n(25),v=n(72),d=n(94),l=n(149),y=n(35),g=n(198),m=n(208),S=n(193),b=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},w=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e,r){var i;Object(o.a)(this,n);var s=e;return y.a.throwIfNull(s,"speechConfig"),y.a.throwIfNullOrWhitespace(s.properties.getProperty(g.a.SpeechServiceConnection_RecoLanguage),g.a[g.a.SpeechServiceConnection_RecoLanguage]),(i=t.call(this,r,s.properties,new p.a)).privDisposedRecognizer=!1,i}return Object(s.a)(n,[{key:"endpointId",get:function(){return y.a.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(g.a.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}},{key:"authorizationToken",get:function(){return this.properties.getProperty(g.a.SpeechServiceAuthorization_Token)},set:function(e){y.a.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(g.a.SpeechServiceAuthorization_Token,e)}},{key:"speechRecognitionLanguage",get:function(){return y.a.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(g.a.SpeechServiceConnection_RecoLanguage)}},{key:"outputFormat",get:function(){return y.a.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(f.OutputFormatPropertyName,m.a[m.a.Simple])===m.a[m.a.Simple]?m.a.Simple:m.a.Detailed}},{key:"properties",get:function(){return this.privProperties}},{key:"recognizeOnceAsync",value:function(e,t){Object(l.b)(this.recognizeOnceAsyncImpl(v.c.Interactive),e,t)}},{key:"startContinuousRecognitionAsync",value:function(e,t){Object(l.b)(this.startContinuousRecognitionAsyncImpl(v.c.Conversation),e,t)}},{key:"stopContinuousRecognitionAsync",value:function(e,t){Object(l.b)(this.stopContinuousRecognitionAsyncImpl(),e,t)}},{key:"startKeywordRecognitionAsync",value:function(e,t,n){y.a.throwIfNull(e,"model"),n&&n("Not yet implemented.")}},{key:"stopKeywordRecognitionAsync",value:function(e,t){e&&e()}},{key:"close",value:function(e,t){y.a.throwIfDisposed(this.privDisposedRecognizer),Object(l.b)(this.dispose(!0),e,t)}},{key:"dispose",value:function(e){var t=this,r=Object.create(null,{dispose:{get:function(){return Object(a.a)(Object(c.a)(n.prototype),"dispose",t)}}});return b(this,void 0,void 0,i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.privDisposedRecognizer){t.next=2;break}return t.abrupt("return");case 2:if(!e){t.next=6;break}return this.privDisposedRecognizer=!0,t.next=6,this.implRecognizerStop();case 6:return t.next=8,r.dispose.call(this,e);case 8:case"end":return t.stop()}}),t,this)})))}},{key:"createRecognizerConfig",value:function(e){return new v.d(e,this.properties)}},{key:"createServiceRecognizer",value:function(e,t,n,r){var i=n;return new d.a(e,t,i,r,this)}}],[{key:"FromConfig",value:function(e,t,r){var i=e;return t.properties.mergeTo(i.properties),new n(e,r)}}]),n}(S.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(18),i=n(19),o=n(159),s=n(30),a=n(34),c=function(){function e(t,n,i){if(Object(r.a)(this,e),this.privPayload=null,!n)throw new s.a("payload");if(t===o.b.Binary&&"ArrayBuffer"!==n.__proto__.constructor.name)throw new s.b("Payload must be ArrayBuffer");if(t===o.b.Text&&"string"!==typeof n)throw new s.b("Payload must be a string");this.privMessageType=t,this.privPayload=n,this.privId=i||Object(a.a)()}return Object(i.a)(e,[{key:"messageType",get:function(){return this.privMessageType}},{key:"payload",get:function(){return this.privPayload}},{key:"textContent",get:function(){if(this.privMessageType===o.b.Binary)throw new s.b("Not supported for binary message");return this.privPayload}},{key:"binaryContent",get:function(){if(this.privMessageType===o.b.Text)throw new s.b("Not supported for text message");return this.privPayload}},{key:"id",get:function(){return this.privId}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r=n(22),i=n(23),o=n(18),s=n(19),a=function e(t,n){var r=this;Object(o.a)(this,e),this.encode=function(e){var t=r.downSampleAudioFrame(e,r.privActualSampleRate,r.privDesiredSampleRate);if(!t)return null;var n=2*t.length,i=new ArrayBuffer(n),o=new DataView(i);return r.floatTo16BitPCM(o,0,t),i},this.setString=function(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))},this.floatTo16BitPCM=function(e,t,n){for(var r=0;r<n.length;r++,t+=2){var i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?32768*i:32767*i,!0)}},this.downSampleAudioFrame=function(e,t,n){if(n===t||n>t)return e;for(var r=t/n,i=Math.round(e.length/r),o=new Float32Array(i),s=0,a=0;a<i;){for(var c=Math.round((a+1)*r),u=0,h=0;s<c&&s<e.length;)u+=e[s++],h++;o[a++]=u/h}return o},this.privActualSampleRate=t,this.privDesiredSampleRate=n},c=function(){function e(){var t=this;Object(o.a)(this,e),this.record=function(e,n,r){var i=function(){var t=0;try{return e.createScriptProcessor(t,1,1)}catch(r){t=2048;for(var n=e.sampleRate;t<16384&&n>=32e3;)t<<=1,n>>=1;return e.createScriptProcessor(t,1,1)}}(),o=new a(e.sampleRate,16e3);i.onaudioprocess=function(e){var t=e.inputBuffer.getChannelData(0);if(r&&!r.isClosed){var n=o.encode(t);n&&(r.writeStreamChunk({buffer:n,isEnd:!1,timeReceived:Date.now()}),!1)}};var s=e.createMediaStreamSource(n);t.privSpeechProcessorScript&&e.audioWorklet?e.audioWorklet.addModule(t.privSpeechProcessorScript).then((function(){var i=new AudioWorkletNode(e,"speech-processor");i.port.onmessage=function(e){var t=e.data;if(r&&!r.isClosed){var n=o.encode(t);n&&(r.writeStreamChunk({buffer:n,isEnd:!1,timeReceived:Date.now()}),!1)}},s.connect(i),i.connect(e.destination),t.privMediaResources={scriptProcessorNode:i,source:s,stream:n}})).catch((function(){s.connect(i),i.connect(e.destination),t.privMediaResources={scriptProcessorNode:i,source:s,stream:n}})):(s.connect(i),i.connect(e.destination),t.privMediaResources={scriptProcessorNode:i,source:s,stream:n})},this.releaseMediaResources=function(e){t.privMediaResources&&(t.privMediaResources.scriptProcessorNode&&(t.privMediaResources.scriptProcessorNode.disconnect(e.destination),t.privMediaResources.scriptProcessorNode=null),t.privMediaResources.source&&(t.privMediaResources.source.disconnect(),t.privMediaResources.stream.getTracks().forEach((function(e){return e.stop()})),t.privMediaResources.source=null))}}return Object(s.a)(e,[{key:"setWorkletUrl",value:function(e){this.privSpeechProcessorScript=e}}]),e}(),u=n(26),h=n(20),p=n.n(h),f=n(72),v=n(149),d=n(194),l=n(195),y=n(197),g=n(34),m=n(153),S=n(44),b=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},w=function(){function e(t,n,r,i){var s=this;Object(o.a)(this,e),this.privRecorder=t,this.deviceId=n,this.privStreams={},this.turnOn=function(){if(s.privInitializeDeferral)return s.privInitializeDeferral.promise;s.privInitializeDeferral=new v.a;try{s.createAudioContext()}catch(o){if(o instanceof Error){var e=o;s.privInitializeDeferral.reject(e.name+": "+e.message)}else s.privInitializeDeferral.reject(o);return s.privInitializeDeferral.promise}var t=window.navigator,n=t.getUserMedia||t.webkitGetUserMedia||t.mozGetUserMedia||t.msGetUserMedia;if(t.mediaDevices&&(n=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n).catch(r)}),n){var r=function(){s.onEvent(new d.b(s.privId)),s.privMediaStream&&s.privMediaStream.active?(s.onEvent(new d.d(s.privId)),s.privInitializeDeferral.resolve()):n({audio:!s.deviceId||{deviceId:s.deviceId},video:!1},(function(e){s.privMediaStream=e,s.onEvent(new d.d(s.privId)),s.privInitializeDeferral.resolve()}),(function(e){var t="Error occurred during microphone initialization: ".concat(e);s.privInitializeDeferral.reject(t),s.onEvent(new d.a(s.privId,t))}))};"suspended"===s.privContext.state?s.privContext.resume().then(r).catch((function(e){s.privInitializeDeferral.reject("Failed to initialize audio context: ".concat(e))})):r()}else{var i="Browser does not support getUserMedia.";s.privInitializeDeferral.reject(i),s.onEvent(new d.a(i,""))}return s.privInitializeDeferral.promise},this.id=function(){return s.privId},this.attach=function(e){return s.onEvent(new d.f(s.privId,e)),s.listen(e).then((function(t){return s.onEvent(new d.e(s.privId,e)),{detach:function(){return b(s,void 0,void 0,p.a.mark((function n(){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.readEnded(),delete this.privStreams[e],this.onEvent(new d.g(this.privId,e)),n.abrupt("return",this.turnOff());case 4:case"end":return n.stop()}}),n,this)})))},id:function(){return e},read:function(){return t.read()}}}))},this.detach=function(e){e&&s.privStreams[e]&&(s.privStreams[e].close(),delete s.privStreams[e],s.onEvent(new d.g(s.privId,e)))},this.listen=function(e){return b(s,void 0,void 0,p.a.mark((function t(){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.turnOn();case 2:n=new l.a(this.privOutputChunkSize,e),this.privStreams[e]=n,t.prev=4,this.privRecorder.record(this.privContext,this.privMediaStream,n),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(4),this.onEvent(new d.h(this.privId,e,t.t0)),t.t0;case 12:return r=n,t.abrupt("return",r);case 14:case"end":return t.stop()}}),t,this,[[4,8]])})))},this.onEvent=function(e){s.privEvents.onEvent(e),y.a.instance.onEvent(e)},this.createAudioContext=function(){s.privContext||(s.privContext=S.b.getAudioContext(e.AUDIOFORMAT.samplesPerSec))},this.privOutputChunkSize=e.AUDIOFORMAT.avgBytesPerSec/10,this.privId=r||Object(g.a)(),this.privEvents=new m.a,this.privMediaStream=i||null}return Object(s.a)(e,[{key:"format",get:function(){return Promise.resolve(e.AUDIOFORMAT)}},{key:"blob",get:function(){return Promise.reject("Not implemented for Mic input")}},{key:"turnOff",value:function(){return b(this,void 0,void 0,p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t in this.privStreams)t&&(n=this.privStreams[t])&&n.close();if(this.onEvent(new d.c(this.privId)),!this.privInitializeDeferral){e.next=6;break}return e.next=5,this.privInitializeDeferral;case 5:this.privInitializeDeferral=null;case 6:return e.next=8,this.destroyAudioContext();case 8:return e.abrupt("return");case 9:case"end":return e.stop()}}),e,this)})))}},{key:"events",get:function(){return this.privEvents}},{key:"deviceInfo",get:function(){return this.getMicrophoneLabel().then((function(t){return{bitspersample:e.AUDIOFORMAT.bitsPerSample,channelcount:e.AUDIOFORMAT.channels,connectivity:f.f.Unknown,manufacturer:"Speech SDK",model:t,samplerate:e.AUDIOFORMAT.samplesPerSec,type:f.g.Microphones}}))}},{key:"setProperty",value:function(e,t){if("MICROPHONE-WorkletSourceUrl"!==e)throw new Error("Property '"+e+"' is not supported on Microphone.");this.privRecorder.setWorkletUrl(t)}},{key:"getMicrophoneLabel",value:function(){var e=this,t="microphone";if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve(t);this.privMicrophoneLabel=t;var n=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===n)return Promise.resolve(this.privMicrophoneLabel);var r=new v.a;return navigator.mediaDevices.enumerateDevices().then((function(t){var i,o=Object(u.a)(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(s.deviceId===n){e.privMicrophoneLabel=s.label;break}}}catch(a){o.e(a)}finally{o.f()}r.resolve(e.privMicrophoneLabel)}),(function(){return r.resolve(e.privMicrophoneLabel)})),r.promise}},{key:"destroyAudioContext",value:function(){return b(this,void 0,void 0,p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.privContext){e.next=2;break}return e.abrupt("return");case 2:if(this.privRecorder.releaseMediaResources(this.privContext),t=!1,"close"in this.privContext&&(t=!0),!t){e.next=11;break}return e.next=8,this.privContext.close();case 8:this.privContext=null,e.next=14;break;case 11:if(null===this.privContext||"running"!==this.privContext.state){e.next=14;break}return e.next=14,this.privContext.suspend();case 14:case"end":return e.stop()}}),e,this)})))}}]),e}();w.AUDIOFORMAT=S.a.getDefaultInputFormat();var k,O=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},C=function(){function e(t,n,r){var i=this;Object(o.a)(this,e),this.privStreams={},this.privHeaderEnd=44,this.turnOn=function(){if(i.privFilename.lastIndexOf(".wav")!==i.privFilename.length-4){var e=i.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return i.onEvent(new d.a(e,"")),Promise.reject(e)}i.onEvent(new d.b(i.privId)),i.onEvent(new d.d(i.privId))},this.id=function(){return i.privId},this.attach=function(e){return O(i,void 0,void 0,p.a.mark((function t(){var n,r=this;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.onEvent(new d.f(this.privId,e)),t.next=3,this.upload(e);case 3:return n=t.sent,this.onEvent(new d.e(this.privId,e)),t.abrupt("return",Promise.resolve({detach:function(){return O(r,void 0,void 0,p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.readEnded(),delete this.privStreams[e],this.onEvent(new d.g(this.privId,e)),t.next=5,this.turnOff();case 5:case"end":return t.stop()}}),t,this)})))},id:function(){return e},read:function(){return n.read()}}));case 6:case"end":return t.stop()}}),t,this)})))},this.detach=function(e){e&&i.privStreams[e]&&(i.privStreams[e].close(),delete i.privStreams[e],i.onEvent(new d.g(i.privId,e)))},this.turnOff=function(){for(var e in i.privStreams)if(e){var t=i.privStreams[e];t&&!t.isClosed&&t.close()}return i.onEvent(new d.c(i.privId)),Promise.resolve()},this.onEvent=function(e){i.privEvents.onEvent(e),y.a.instance.onEvent(e)},this.privId=r||Object(g.a)(),this.privEvents=new m.a,this.privSource=t,"undefined"!==typeof window&&"undefined"!==typeof Blob&&this.privSource instanceof Blob?this.privFilename=t.name:this.privFilename=n||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}return Object(s.a)(e,[{key:"format",get:function(){return this.privAudioFormatPromise}},{key:"blob",get:function(){return Promise.resolve(this.privSource)}},{key:"events",get:function(){return this.privEvents}},{key:"deviceInfo",get:function(){return this.privAudioFormatPromise.then((function(e){return Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:f.f.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:f.g.File})}))}},{key:"readHeader",value:function(){var e=this,t=this.privSource.slice(0,512),n=new v.a,r=function(t){var r=new DataView(t),i=function(e){return String.fromCharCode(r.getUint8(e),r.getUint8(e+1),r.getUint8(e+2),r.getUint8(e+3))};if("RIFF"===i(0))if("WAVE"===i(8)&&"fmt "===i(12)){for(var o=r.getInt32(16,!0),s=r.getUint16(22,!0),a=r.getUint32(24,!0),c=r.getUint16(34,!0),u=36+Math.max(o-16,0);"data"!==i(u);u+=2)if(u>504)return void n.reject("Invalid WAV header in file, data block was not found");e.privHeaderEnd=u+8,n.resolve(S.a.getWaveFormatPCM(a,c,s))}else n.reject("Invalid WAV header in file, WAVEfmt was not found");else n.reject("Invalid WAV header in file, RIFF was not found")};if("undefined"!==typeof window&&"undefined"!==typeof Blob&&t instanceof Blob){var i=new FileReader;i.onload=function(e){var t=e.target.result;r(t)},i.readAsArrayBuffer(t)}else{var o=t;r(o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength))}return n.promise}},{key:"upload",value:function(e){return O(this,void 0,void 0,p.a.mark((function t(){var n,r,i,o,s,a,c,u=this;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(t){var n="Error occurred while processing '".concat(u.privFilename,"'. ").concat(t);throw u.onEvent(new d.h(u.privId,e,n)),new Error(n)},t.prev=1,t.next=4,this.turnOn();case 4:return t.next=6,this.privAudioFormatPromise;case 6:return r=t.sent,i=new l.a(r.avgBytesPerSec/10,e),this.privStreams[e]=i,o=this.privSource.slice(this.privHeaderEnd),s=function(e){i.isClosed||(i.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),i.close())},"undefined"!==typeof window&&"undefined"!==typeof Blob&&o instanceof Blob?((a=new FileReader).onerror=function(e){n(e.toString())},a.onload=function(e){var t=e.target.result;s(t)},a.readAsArrayBuffer(o)):s((c=o).buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)),t.abrupt("return",i);case 15:t.prev=15,t.t0=t.catch(1),n(t.t0);case 18:case"end":return t.stop()}}),t,this,[[1,15]])})))}}]),e}(),R=n(35),P=function e(){Object(o.a)(this,e)},E=n(154),I=n(53),x=n(59),A=n(205),T=n(74),j=n(56),D=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},M=(k={},Object(I.a)(k,T.a.PCM,"audio/wav"),Object(I.a)(k,T.a.MP3,"audio/mpeg"),Object(I.a)(k,T.a.OGG_OPUS,"audio/ogg"),Object(I.a)(k,T.a.WEBM_OPUS,"audio/webm; codecs=opus"),k),_=function(){function e(t){Object(o.a)(this,e),this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=t||Object(g.a)(),this.privIsPaused=!1,this.privIsClosed=!1}return Object(s.a)(e,[{key:"id",value:function(){return this.privId}},{key:"write",value:function(e,t,n){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then((function(){t&&t()}),(function(e){n&&n(e)}))):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}},{key:"close",value:function(e,t){var n=this;if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then((function(){e&&e()}),(function(e){t&&t(e)}));else if(void 0!==this.privAudioOutputStream){var r=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(r).then((function(i){n.privFormat.hasHeader&&(r=x.a.addHeader(r,n.privFormat));var o=new Blob([r],{type:M[n.privFormat.formatTag]});n.privAudio.src=window.URL.createObjectURL(o),n.notifyPlayback().then((function(){e&&e()}),(function(e){t&&t(e)}))}),(function(e){t&&t(e)}))}}},{key:"format",set:function(e){var t=this;if("undefined"!==typeof AudioContext||"undefined"!==typeof window.webkitAudioContext){this.privFormat=e;var n=M[this.privFormat.formatTag];void 0===n?console.warn("Unknown mimeType for format ".concat(T.a[this.privFormat.formatTag],".")):"undefined"!==typeof MediaSource&&MediaSource.isTypeSupported(n)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=function(e){t.privMediaSourceOpened=!0,t.privMediaSource.duration=1800,t.privSourceBuffer=t.privMediaSource.addSourceBuffer(n),t.privSourceBuffer.onupdate=function(e){t.updateSourceBuffer().catch((function(e){y.a.instance.onEvent(new A.a(e))}))},t.privSourceBuffer.onupdateend=function(e){t.handleSourceBufferUpdateEnd().catch((function(e){y.a.instance.onEvent(new A.a(e))}))},t.privSourceBuffer.onupdatestart=function(e){t.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch((function(e){y.a.instance.onEvent(new A.a(e))}))):(console.warn("Format ".concat(T.a[this.privFormat.formatTag]," could not be played by MSE, streaming playback is not enabled.")),this.privAudioOutputStream=new j.b,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}},{key:"isClosed",get:function(){return this.privIsClosed}},{key:"currentTime",get:function(){return void 0!==this.privAudio?this.privAudio.currentTime:-1}},{key:"pause",value:function(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)}},{key:"resume",value:function(e,t){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then((function(){e&&e()}),(function(e){t&&t(e)})),this.privIsPaused=!1)}},{key:"internalAudio",get:function(){return this.privAudio}},{key:"updateSourceBuffer",value:function(){return D(this,void 0,void 0,p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable())){e.next=16;break}this.privAppendingToBuffer=!0,t=this.privAudioBuffer.shift(),e.prev=3,this.privSourceBuffer.appendBuffer(t),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(3),this.privAudioBuffer.unshift(t),console.log("buffer filled, pausing addition of binaries until space is made"),e.abrupt("return");case 12:return e.next=14,this.notifyPlayback();case 14:e.next=19;break;case 16:if(!this.canEndStream()){e.next=19;break}return e.next=19,this.handleSourceBufferUpdateEnd();case 19:case"end":return e.stop()}}),e,this,[[3,7]])})))}},{key:"handleSourceBufferUpdateEnd",value:function(){return D(this,void 0,void 0,p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.canEndStream()||!this.sourceBufferAvailable()){e.next=4;break}return this.privMediaSource.endOfStream(),e.next=4,this.notifyPlayback();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"notifyPlayback",value:function(){return D(this,void 0,void 0,p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.privPlaybackStarted||void 0===this.privAudio){e.next=7;break}if(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=function(){t.onAudioEnd&&t.onAudioEnd(t)},this.privIsPaused){e.next=7;break}return e.next=7,this.privAudio.play();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"canEndStream",value:function(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState}},{key:"sourceBufferAvailable",value:function(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating}}]),e}(),B=function e(){Object(o.a)(this,e)},z=n(160),L=function(){function e(t){var n=this;Object(o.a)(this,e),this.id=function(){return n.privId},this.privFd=z.openSync(t,"w")}return Object(s.a)(e,[{key:"format",set:function(e){R.a.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;var t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=z.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))}},{key:"write",value:function(e){R.a.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}},{key:"close",value:function(){var e=this;void 0!==this.privFd&&(this.privWriteStream.on("finish",(function(){e.privAudioFormat.hasHeader&&(e.privAudioFormat.updateHeader(e.privWriteStream.bytesWritten),z.writeSync(e.privFd,new Int8Array(e.privAudioFormat.header),0,e.privAudioFormat.header.byteLength,0)),z.closeSync(e.privFd),e.privFd=void 0})),this.privWriteStream.end())}}]),e}(),N=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,null,[{key:"fromDefaultMicrophoneInput",value:function(){var e=new c;return new F(new w(e))}},{key:"fromMicrophoneInput",value:function(e){var t=new c;return new F(new w(t,e))}},{key:"fromWavFileInput",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamedBuffer.wav";return new F(new C(e,t))}},{key:"fromStreamInput",value:function(e){if(e instanceof P)return new F(new E.b(e));if(e instanceof E.a)return new F(e);if(e instanceof MediaStream){var t=new c;return new F(new w(t,null,null,e))}throw new Error("Not Supported Type")}},{key:"fromDefaultSpeakerOutput",value:function(){return new U(new _)}},{key:"fromSpeakerOutput",value:function(t){if(void 0===t)return e.fromDefaultSpeakerOutput();if(t instanceof _)return new U(t);throw new Error("Not Supported Type")}},{key:"fromAudioFileOutput",value:function(e){return new U(new L(e))}},{key:"fromStreamOutput",value:function(e){if(e instanceof B)return new U(new j.d(e));if(e instanceof j.c)return new U(e);if(e instanceof j.a)return new U(e);throw new Error("Not Supported Type")}}]),e}(),F=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this)).privSource=e,r}return Object(s.a)(n,[{key:"format",get:function(){return this.privSource.format}},{key:"close",value:function(e,t){this.privSource.turnOff().then((function(){e&&e()}),(function(e){t&&t(e)}))}},{key:"id",value:function(){return this.privSource.id()}},{key:"blob",get:function(){return this.privSource.blob}},{key:"turnOn",value:function(){return this.privSource.turnOn()}},{key:"attach",value:function(e){return this.privSource.attach(e)}},{key:"detach",value:function(e){return this.privSource.detach(e)}},{key:"turnOff",value:function(){return this.privSource.turnOff()}},{key:"events",get:function(){return this.privSource.events}},{key:"setProperty",value:function(e,t){if(R.a.throwIfNull(t,"value"),void 0===this.privSource.setProperty)throw new Error("This AudioConfig instance does not support setting properties.");this.privSource.setProperty(e,t)}},{key:"getProperty",value:function(e,t){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(e,t);throw new Error("This AudioConfig instance does not support getting properties.")}},{key:"deviceInfo",get:function(){return this.privSource.deviceInfo}}]),n}(N),U=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this)).privDestination=e,r}return Object(s.a)(n,[{key:"format",set:function(e){this.privDestination.format=e}},{key:"write",value:function(e){this.privDestination.write(e)}},{key:"close",value:function(){this.privDestination.close()}},{key:"id",value:function(){return this.privDestination.id()}},{key:"setProperty",value:function(e,t){throw new Error("This AudioConfig instance does not support setting properties.")}},{key:"getProperty",value:function(e,t){throw new Error("This AudioConfig instance does not support getting properties.")}}]),n}(N)},,function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r,i=n(22),o=n(23),s=n(18),a=n(19),c=n(25),u=n(35),h=n(198),p=n(202),f=n(208);!function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"}(r||(r={}));var v=n(158),d=function(){function e(){Object(s.a)(this,e)}return Object(a.a)(e,[{key:"close",value:function(){}}],[{key:"fromSubscription",value:function(e,t){u.a.throwIfNullOrWhitespace(e,"subscriptionKey"),u.a.throwIfNullOrWhitespace(t,"region");var n=new l;return n.setProperty(h.a.SpeechServiceConnection_Region,t),n.setProperty(h.a.SpeechServiceConnection_IntentRegion,t),n.setProperty(h.a.SpeechServiceConnection_Key,e),n}},{key:"fromEndpoint",value:function(e,t){u.a.throwIfNull(e,"endpoint");var n=new l;return n.setProperty(h.a.SpeechServiceConnection_Endpoint,e.href),void 0!==t&&n.setProperty(h.a.SpeechServiceConnection_Key,t),n}},{key:"fromHost",value:function(e,t){u.a.throwIfNull(e,"hostName");var n=new l;return n.setProperty(h.a.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&n.setProperty(h.a.SpeechServiceConnection_Key,t),n}},{key:"fromAuthorizationToken",value:function(e,t){u.a.throwIfNull(e,"authorizationToken"),u.a.throwIfNullOrWhitespace(t,"region");var n=new l;return n.setProperty(h.a.SpeechServiceConnection_Region,t),n.setProperty(h.a.SpeechServiceConnection_IntentRegion,t),n.authorizationToken=e,n}}]),e}(),l=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).privProperties=new p.a,e.speechRecognitionLanguage="en-US",e.outputFormat=f.a.Simple,e}return Object(a.a)(n,[{key:"properties",get:function(){return this.privProperties}},{key:"endPoint",get:function(){return new URL(this.privProperties.getProperty(h.a.SpeechServiceConnection_Endpoint))}},{key:"subscriptionKey",get:function(){return this.privProperties.getProperty(h.a.SpeechServiceConnection_Key)}},{key:"region",get:function(){return this.privProperties.getProperty(h.a.SpeechServiceConnection_Region)}},{key:"authorizationToken",get:function(){return this.privProperties.getProperty(h.a.SpeechServiceAuthorization_Token)},set:function(e){this.privProperties.setProperty(h.a.SpeechServiceAuthorization_Token,e)}},{key:"speechRecognitionLanguage",get:function(){return this.privProperties.getProperty(h.a.SpeechServiceConnection_RecoLanguage)},set:function(e){this.privProperties.setProperty(h.a.SpeechServiceConnection_RecoLanguage,e)}},{key:"autoDetectSourceLanguages",get:function(){return this.privProperties.getProperty(h.a.SpeechServiceConnection_AutoDetectSourceLanguages)},set:function(e){this.privProperties.setProperty(h.a.SpeechServiceConnection_AutoDetectSourceLanguages,e)}},{key:"outputFormat",get:function(){return f.a[this.privProperties.getProperty(c.OutputFormatPropertyName,void 0)]},set:function(e){this.privProperties.setProperty(c.OutputFormatPropertyName,f.a[e])}},{key:"endpointId",get:function(){return this.privProperties.getProperty(h.a.SpeechServiceConnection_EndpointId)},set:function(e){this.privProperties.setProperty(h.a.SpeechServiceConnection_EndpointId,e)}},{key:"setProperty",value:function(e,t){u.a.throwIfNull(t,"value"),this.privProperties.setProperty(e,t)}},{key:"getProperty",value:function(e,t){return this.privProperties.getProperty(e,t)}},{key:"setProxy",value:function(e,t,n,r){this.setProperty(h.a[h.a.SpeechServiceConnection_ProxyHostName],e),this.setProperty(h.a[h.a.SpeechServiceConnection_ProxyPort],t),this.setProperty(h.a[h.a.SpeechServiceConnection_ProxyUserName],n),this.setProperty(h.a[h.a.SpeechServiceConnection_ProxyPassword],r)}},{key:"setServiceProperty",value:function(e,t,n){var r=JSON.parse(this.privProperties.getProperty(c.ServicePropertiesPropertyName,"{}"));r[e]=t,this.privProperties.setProperty(c.ServicePropertiesPropertyName,JSON.stringify(r))}},{key:"setProfanity",value:function(e){this.privProperties.setProperty(h.a.SpeechServiceResponse_ProfanityOption,r[e])}},{key:"enableAudioLogging",value:function(){this.privProperties.setProperty(h.a.SpeechServiceConnection_EnableAudioLogging,"true")}},{key:"requestWordLevelTimestamps",value:function(){this.privProperties.setProperty(h.a.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}},{key:"enableDictation",value:function(){this.privProperties.setProperty(c.ForceDictationPropertyName,"true")}},{key:"clone",value:function(){var e=new n;return e.privProperties=this.privProperties.clone(),e}},{key:"speechSynthesisLanguage",get:function(){return this.privProperties.getProperty(h.a.SpeechServiceConnection_SynthLanguage)},set:function(e){this.privProperties.setProperty(h.a.SpeechServiceConnection_SynthLanguage,e)}},{key:"speechSynthesisVoiceName",get:function(){return this.privProperties.getProperty(h.a.SpeechServiceConnection_SynthVoice)},set:function(e){this.privProperties.setProperty(h.a.SpeechServiceConnection_SynthVoice,e)}},{key:"speechSynthesisOutputFormat",get:function(){return v.a[this.privProperties.getProperty(h.a.SpeechServiceConnection_SynthOutputFormat,void 0)]},set:function(e){this.privProperties.setProperty(h.a.SpeechServiceConnection_SynthOutputFormat,v.a[e])}}]),n}(d)}])]);
//# sourceMappingURL=1.3cfebadd.chunk.js.map